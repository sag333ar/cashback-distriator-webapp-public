import{a as ar}from"./index-YdY0FlOh.js";import{S as st,T as z,a as it,b as Er,c as vr,d as Rr,e as ot,D as gr,f as Lr}from"./index-DIX96GLX.js";var J={exports:{}},at;function Ir(){if(at)return J.exports;at=1;var i=typeof Reflect=="object"?Reflect:null,e=i&&typeof i.apply=="function"?i.apply:function(h,p,g){return Function.prototype.apply.call(h,p,g)},r;i&&typeof i.ownKeys=="function"?r=i.ownKeys:Object.getOwnPropertySymbols?r=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:r=function(h){return Object.getOwnPropertyNames(h)};function n(d){console&&console.warn&&console.warn(d)}var s=Number.isNaN||function(h){return h!==h};function c(){c.init.call(this)}J.exports=c,J.exports.once=C,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(d){if(typeof d!="number"||d<0||s(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");u=d}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||s(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function o(d){return d._maxListeners===void 0?c.defaultMaxListeners:d._maxListeners}c.prototype.getMaxListeners=function(){return o(this)},c.prototype.emit=function(h){for(var p=[],g=1;g<arguments.length;g++)p.push(arguments[g]);var E=h==="error",P=this._events;if(P!==void 0)E=E&&P.error===void 0;else if(!E)return!1;if(E){var T;if(p.length>0&&(T=p[0]),T instanceof Error)throw T;var G=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw G.context=T,G}var k=P[h];if(k===void 0)return!1;if(typeof k=="function")e(k,this,p);else for(var H=k.length,L=x(k,H),g=0;g<H;++g)e(L[g],this,p);return!0};function a(d,h,p,g){var E,P,T;if(l(p),P=d._events,P===void 0?(P=d._events=Object.create(null),d._eventsCount=0):(P.newListener!==void 0&&(d.emit("newListener",h,p.listener?p.listener:p),P=d._events),T=P[h]),T===void 0)T=P[h]=p,++d._eventsCount;else if(typeof T=="function"?T=P[h]=g?[p,T]:[T,p]:g?T.unshift(p):T.push(p),E=o(d),E>0&&T.length>E&&!T.warned){T.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=d,G.type=h,G.count=T.length,n(G)}return d}c.prototype.addListener=function(h,p){return a(this,h,p,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(h,p){return a(this,h,p,!0)};function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(d,h,p){var g={fired:!1,wrapFn:void 0,target:d,type:h,listener:p},E=t.bind(g);return E.listener=p,g.wrapFn=E,E}c.prototype.once=function(h,p){return l(p),this.on(h,f(this,h,p)),this},c.prototype.prependOnceListener=function(h,p){return l(p),this.prependListener(h,f(this,h,p)),this},c.prototype.removeListener=function(h,p){var g,E,P,T,G;if(l(p),E=this._events,E===void 0)return this;if(g=E[h],g===void 0)return this;if(g===p||g.listener===p)--this._eventsCount===0?this._events=Object.create(null):(delete E[h],E.removeListener&&this.emit("removeListener",h,g.listener||p));else if(typeof g!="function"){for(P=-1,T=g.length-1;T>=0;T--)if(g[T]===p||g[T].listener===p){G=g[T].listener,P=T;break}if(P<0)return this;P===0?g.shift():R(g,P),g.length===1&&(E[h]=g[0]),E.removeListener!==void 0&&this.emit("removeListener",h,G||p)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(h){var p,g,E;if(g=this._events,g===void 0)return this;if(g.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):g[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete g[h]),this;if(arguments.length===0){var P=Object.keys(g),T;for(E=0;E<P.length;++E)T=P[E],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(p=g[h],typeof p=="function")this.removeListener(h,p);else if(p!==void 0)for(E=p.length-1;E>=0;E--)this.removeListener(h,p[E]);return this};function m(d,h,p){var g=d._events;if(g===void 0)return[];var E=g[h];return E===void 0?[]:typeof E=="function"?p?[E.listener||E]:[E]:p?O(E):x(E,E.length)}c.prototype.listeners=function(h){return m(this,h,!0)},c.prototype.rawListeners=function(h){return m(this,h,!1)},c.listenerCount=function(d,h){return typeof d.listenerCount=="function"?d.listenerCount(h):I.call(d,h)},c.prototype.listenerCount=I;function I(d){var h=this._events;if(h!==void 0){var p=h[d];if(typeof p=="function")return 1;if(p!==void 0)return p.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function x(d,h){for(var p=new Array(h),g=0;g<h;++g)p[g]=d[g];return p}function R(d,h){for(;h+1<d.length;h++)d[h]=d[h+1];d.pop()}function O(d){for(var h=new Array(d.length),p=0;p<h.length;++p)h[p]=d[p].listener||d[p];return h}function C(d,h){return new Promise(function(p,g){function E(T){d.removeListener(h,P),g(T)}function P(){typeof d.removeListener=="function"&&d.removeListener("error",E),p([].slice.call(arguments))}b(d,h,P,{once:!0}),h!=="error"&&D(d,E,{once:!0})})}function D(d,h,p){typeof d.on=="function"&&b(d,"error",h,p)}function b(d,h,p,g){if(typeof d.on=="function")g.once?d.once(h,p):d.on(h,p);else if(typeof d.addEventListener=="function")d.addEventListener(h,function E(P){g.once&&d.removeEventListener(h,E),p(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d)}return J.exports}var wr=Ir();const $r=ar(wr);let cr=0;const V=[],ct=(i,e,r)=>{const n={type:i,id:String(++cr),date:new Date};e&&(n.message=e),ur(n)},Sr=({type:i,message:e,data:r,context:n})=>{const s={type:i,id:String(++cr),date:new Date};e&&(s.message=e),r&&(s.data=r),n&&(s.context=n),ur(s)};class K{type;context;constructor(e,r){this.type=e,this.context=r}trace(e,r){Sr({type:this.type,message:e,data:r,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new K(e,this.context)}withContext(e){return new K(this.type,e)}withUpdatedContext(e){return new K(this.type,{...this.context,...e})}}const Nr=i=>(V.push(i),()=>{const e=V.indexOf(i);e!==-1&&(V[e]=V[V.length-1],V.pop())});function ur(i){for(let e=0;e<V.length;e++)try{V[e](i)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=Nr);const yr="transport";class Or{exchangeTimeout=3e4;unresponsiveTimeout=15e3;deviceModel=null;tracer;constructor({context:e,logType:r}={}){this.tracer=new K(r??yr,e)}static isSupported;static list;static listen;static open;exchange(e,{abortTimeoutMs:r}={}){throw new Error("exchange not implemented")}exchangeBulk(e,r){let n=!1;const s=()=>{n=!0};return(async()=>{if(!n)for(const u of e){const l=await this.exchange(u);if(n)return;const o=l.readUInt16BE(l.length-2);if(o!==st.OK)throw new it(o);r.next(l)}})().then(()=>!n&&r.complete(),u=>!n&&r.error(u)),{unsubscribe:s}}setScrambleKey(e){}close(){return Promise.resolve()}_events=new $r;on(e,r){this._events.on(e,r)}off(e,r){this._events.removeListener(e,r)}emit(e,...r){this._events.emit(e,...r)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}send=async(e,r,n,s,c=Buffer.alloc(0),u=[st.OK],{abortTimeoutMs:l}={})=>{const o=this.tracer.withUpdatedContext({function:"send"});if(c.length>=256)throw o.trace("data.length exceeded 256 bytes limit",{dataLength:c.length}),new z("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");o.trace("Starting an exchange",{abortTimeoutMs:l});const a=await this.exchange(Buffer.concat([Buffer.from([e,r,n,s]),Buffer.from([c.length]),c]),{abortTimeoutMs:l});o.trace("Received response from exchange");const t=a.readUInt16BE(a.length-2);if(!u.some(f=>f===t))throw new it(t);return a};static create(e=3e3,r){return new Promise((n,s)=>{let c=!1;const u=this.listen({next:o=>{c=!0,u&&u.unsubscribe(),l&&clearTimeout(l),this.open(o.descriptor,e).then(n,s)},error:o=>{l&&clearTimeout(l),s(o)},complete:()=>{l&&clearTimeout(l),c||s(new z(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),l=r?setTimeout(()=>{u.unsubscribe(),s(new z(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},r):null})}exchangeBusyPromise;async exchangeAtomicImpl(e){const r=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw r.trace("Atomic exchange is already busy"),new Er("An action was already pending on the Ledger device. Please deny or reconnect.");let n;const s=new Promise(l=>{n=l});this.exchangeBusyPromise=s;let c=!1;const u=setTimeout(()=>{r.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),c=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const l=await e();return c&&(r.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),l}finally{r.trace("Finalize, clearing busy guard"),clearTimeout(u),n&&n(),this.exchangeBusyPromise=null}}decorateAppAPIMethods(e,r,n){for(const s of r)e[s]=this.decorateAppAPIMethod(s,e[s],e,n)}_appAPIlock=null;decorateAppAPIMethod(e,r,n,s){return async(...c)=>{const{_appAPIlock:u}=this;if(u)return Promise.reject(new z("Ledger Device is busy (lock "+u+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(s),await r.apply(n,c)}finally{this._appAPIlock=null}}}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}static ErrorMessage_ListenTimeout="No Ledger device found (timeout)";static ErrorMessage_NoDeviceFound="No Ledger device found"}const ut=5;function Tr(i){const e=Buffer.alloc(2);return e.writeUInt16BE(i,0),e}const Ar={data:Buffer.alloc(0),dataLength:0,sequence:0},xr=(i,e)=>({makeBlocks(r){let n=Buffer.concat([Tr(r.length),r]);const s=e-5,c=Math.ceil(n.length/s);n=Buffer.concat([n,Buffer.alloc(c*s-n.length+1).fill(0)]);const u=[];for(let l=0;l<c;l++){const o=Buffer.alloc(5);o.writeUInt16BE(i,0),o.writeUInt8(ut,2),o.writeUInt16BE(l,3);const a=n.slice(l*s,(l+1)*s);u.push(Buffer.concat([o,a]))}return u},reduceResponse(r,n){let{data:s,dataLength:c,sequence:u}=r||Ar;if(n.readUInt16BE(0)!==i)throw new z("Invalid channel","InvalidChannel");if(n.readUInt8(2)!==ut)throw new z("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==u)throw new z("Invalid sequence","InvalidSequence");r||(c=n.readUInt16BE(5)),u++;const l=n.slice(r?5:7);return s=Buffer.concat([s,l]),s.length>c&&(s=s.slice(0,c)),{data:s,dataLength:c,sequence:u}},getReducedResult(r){if(r&&r.dataLength===r.data.length)return r.data}});var Q={exports:{}},oe,lt;function te(){if(lt)return oe;lt=1;const i="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,s=e-6;return oe={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:i,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},oe}var ae,ft;function re(){if(ft)return ae;ft=1;var i={};return ae=typeof process=="object"&&i&&i.NODE_DEBUG&&/\bsemver\b/i.test(i.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},ae}var ht;function Z(){return ht||(ht=1,function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=te(),c=re();e=i.exports={};const u=e.re=[],l=e.safeRe=[],o=e.src=[],a=e.safeSrc=[],t=e.t={};let f=0;const m="[a-zA-Z0-9-]",I=[["\\s",1],["\\d",s],[m,n]],x=O=>{for(const[C,D]of I)O=O.split(`${C}*`).join(`${C}{0,${D}}`).split(`${C}+`).join(`${C}{1,${D}}`);return O},R=(O,C,D)=>{const b=x(C),d=f++;c(O,d,C),t[O]=d,o[d]=C,a[d]=b,u[d]=new RegExp(C,D?"g":void 0),l[d]=new RegExp(b,D?"g":void 0)};R("NUMERICIDENTIFIER","0|[1-9]\\d*"),R("NUMERICIDENTIFIERLOOSE","\\d+"),R("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),R("MAINVERSION",`(${o[t.NUMERICIDENTIFIER]})\\.(${o[t.NUMERICIDENTIFIER]})\\.(${o[t.NUMERICIDENTIFIER]})`),R("MAINVERSIONLOOSE",`(${o[t.NUMERICIDENTIFIERLOOSE]})\\.(${o[t.NUMERICIDENTIFIERLOOSE]})\\.(${o[t.NUMERICIDENTIFIERLOOSE]})`),R("PRERELEASEIDENTIFIER",`(?:${o[t.NONNUMERICIDENTIFIER]}|${o[t.NUMERICIDENTIFIER]})`),R("PRERELEASEIDENTIFIERLOOSE",`(?:${o[t.NONNUMERICIDENTIFIER]}|${o[t.NUMERICIDENTIFIERLOOSE]})`),R("PRERELEASE",`(?:-(${o[t.PRERELEASEIDENTIFIER]}(?:\\.${o[t.PRERELEASEIDENTIFIER]})*))`),R("PRERELEASELOOSE",`(?:-?(${o[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[t.PRERELEASEIDENTIFIERLOOSE]})*))`),R("BUILDIDENTIFIER",`${m}+`),R("BUILD",`(?:\\+(${o[t.BUILDIDENTIFIER]}(?:\\.${o[t.BUILDIDENTIFIER]})*))`),R("FULLPLAIN",`v?${o[t.MAINVERSION]}${o[t.PRERELEASE]}?${o[t.BUILD]}?`),R("FULL",`^${o[t.FULLPLAIN]}$`),R("LOOSEPLAIN",`[v=\\s]*${o[t.MAINVERSIONLOOSE]}${o[t.PRERELEASELOOSE]}?${o[t.BUILD]}?`),R("LOOSE",`^${o[t.LOOSEPLAIN]}$`),R("GTLT","((?:<|>)?=?)"),R("XRANGEIDENTIFIERLOOSE",`${o[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),R("XRANGEIDENTIFIER",`${o[t.NUMERICIDENTIFIER]}|x|X|\\*`),R("XRANGEPLAIN",`[v=\\s]*(${o[t.XRANGEIDENTIFIER]})(?:\\.(${o[t.XRANGEIDENTIFIER]})(?:\\.(${o[t.XRANGEIDENTIFIER]})(?:${o[t.PRERELEASE]})?${o[t.BUILD]}?)?)?`),R("XRANGEPLAINLOOSE",`[v=\\s]*(${o[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[t.XRANGEIDENTIFIERLOOSE]})(?:${o[t.PRERELEASELOOSE]})?${o[t.BUILD]}?)?)?`),R("XRANGE",`^${o[t.GTLT]}\\s*${o[t.XRANGEPLAIN]}$`),R("XRANGELOOSE",`^${o[t.GTLT]}\\s*${o[t.XRANGEPLAINLOOSE]}$`),R("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),R("COERCE",`${o[t.COERCEPLAIN]}(?:$|[^\\d])`),R("COERCEFULL",o[t.COERCEPLAIN]+`(?:${o[t.PRERELEASE]})?(?:${o[t.BUILD]})?(?:$|[^\\d])`),R("COERCERTL",o[t.COERCE],!0),R("COERCERTLFULL",o[t.COERCEFULL],!0),R("LONETILDE","(?:~>?)"),R("TILDETRIM",`(\\s*)${o[t.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",R("TILDE",`^${o[t.LONETILDE]}${o[t.XRANGEPLAIN]}$`),R("TILDELOOSE",`^${o[t.LONETILDE]}${o[t.XRANGEPLAINLOOSE]}$`),R("LONECARET","(?:\\^)"),R("CARETTRIM",`(\\s*)${o[t.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",R("CARET",`^${o[t.LONECARET]}${o[t.XRANGEPLAIN]}$`),R("CARETLOOSE",`^${o[t.LONECARET]}${o[t.XRANGEPLAINLOOSE]}$`),R("COMPARATORLOOSE",`^${o[t.GTLT]}\\s*(${o[t.LOOSEPLAIN]})$|^$`),R("COMPARATOR",`^${o[t.GTLT]}\\s*(${o[t.FULLPLAIN]})$|^$`),R("COMPARATORTRIM",`(\\s*)${o[t.GTLT]}\\s*(${o[t.LOOSEPLAIN]}|${o[t.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",R("HYPHENRANGE",`^\\s*(${o[t.XRANGEPLAIN]})\\s+-\\s+(${o[t.XRANGEPLAIN]})\\s*$`),R("HYPHENRANGELOOSE",`^\\s*(${o[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[t.XRANGEPLAINLOOSE]})\\s*$`),R("STAR","(<|>)?=?\\s*\\*"),R("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),R("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Q,Q.exports)),Q.exports}var ce,dt;function Je(){if(dt)return ce;dt=1;const i=Object.freeze({loose:!0}),e=Object.freeze({});return ce=n=>n?typeof n!="object"?i:n:e,ce}var ue,pt;function lr(){if(pt)return ue;pt=1;const i=/^[0-9]+$/,e=(n,s)=>{const c=i.test(n),u=i.test(s);return c&&u&&(n=+n,s=+s),n===s?0:c&&!u?-1:u&&!c?1:n<s?-1:1};return ue={compareIdentifiers:e,rcompareIdentifiers:(n,s)=>e(s,n)},ue}var le,mt;function M(){if(mt)return le;mt=1;const i=re(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=te(),{safeRe:n,t:s}=Z(),c=Je(),{compareIdentifiers:u}=lr();class l{constructor(a,t){if(t=c(t),a instanceof l){if(a.loose===!!t.loose&&a.includePrerelease===!!t.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>e)throw new TypeError(`version is longer than ${e} characters`);i("SemVer",a,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const f=a.trim().match(t.loose?n[s.LOOSE]:n[s.FULL]);if(!f)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(m=>{if(/^[0-9]+$/.test(m)){const I=+m;if(I>=0&&I<r)return I}return m}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(i("SemVer.compare",this.version,this.options,a),!(a instanceof l)){if(typeof a=="string"&&a===this.version)return 0;a=new l(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof l||(a=new l(a,this.options)),u(this.major,a.major)||u(this.minor,a.minor)||u(this.patch,a.patch)}comparePre(a){if(a instanceof l||(a=new l(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let t=0;do{const f=this.prerelease[t],m=a.prerelease[t];if(i("prerelease compare",t,f,m),f===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(f===void 0)return-1;if(f===m)continue;return u(f,m)}while(++t)}compareBuild(a){a instanceof l||(a=new l(a,this.options));let t=0;do{const f=this.build[t],m=a.build[t];if(i("build compare",t,f,m),f===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(f===void 0)return-1;if(f===m)continue;return u(f,m)}while(++t)}inc(a,t,f){if(a.startsWith("pre")){if(!t&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const m=`-${t}`.match(this.options.loose?n[s.PRERELEASELOOSE]:n[s.PRERELEASE]);if(!m||m[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,f),this.inc("pre",t,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,f),this.inc("pre",t,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const m=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[m];else{let I=this.prerelease.length;for(;--I>=0;)typeof this.prerelease[I]=="number"&&(this.prerelease[I]++,I=-2);if(I===-1){if(t===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(m)}}if(t){let I=[t,m];f===!1&&(I=[t]),u(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=I):this.prerelease=I}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return le=l,le}var fe,Et;function W(){if(Et)return fe;Et=1;const i=M();return fe=(r,n,s=!1)=>{if(r instanceof i)return r;try{return new i(r,n)}catch(c){if(!s)return null;throw c}},fe}var he,vt;function Pr(){if(vt)return he;vt=1;const i=W();return he=(r,n)=>{const s=i(r,n);return s?s.version:null},he}var de,Rt;function Cr(){if(Rt)return de;Rt=1;const i=W();return de=(r,n)=>{const s=i(r.trim().replace(/^[=v]+/,""),n);return s?s.version:null},de}var pe,gt;function br(){if(gt)return pe;gt=1;const i=M();return pe=(r,n,s,c,u)=>{typeof s=="string"&&(u=c,c=s,s=void 0);try{return new i(r instanceof i?r.version:r,s).inc(n,c,u).version}catch{return null}},pe}var me,Lt;function _r(){if(Lt)return me;Lt=1;const i=W();return me=(r,n)=>{const s=i(r,null,!0),c=i(n,null,!0),u=s.compare(c);if(u===0)return null;const l=u>0,o=l?s:c,a=l?c:s,t=!!o.prerelease.length;if(!!a.prerelease.length&&!t){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}const m=t?"pre":"";return s.major!==c.major?m+"major":s.minor!==c.minor?m+"minor":s.patch!==c.patch?m+"patch":"prerelease"},me}var Ee,It;function qr(){if(It)return Ee;It=1;const i=M();return Ee=(r,n)=>new i(r,n).major,Ee}var ve,wt;function Dr(){if(wt)return ve;wt=1;const i=M();return ve=(r,n)=>new i(r,n).minor,ve}var Re,$t;function Ur(){if($t)return Re;$t=1;const i=M();return Re=(r,n)=>new i(r,n).patch,Re}var ge,St;function jr(){if(St)return ge;St=1;const i=W();return ge=(r,n)=>{const s=i(r,n);return s&&s.prerelease.length?s.prerelease:null},ge}var Le,Nt;function B(){if(Nt)return Le;Nt=1;const i=M();return Le=(r,n,s)=>new i(r,s).compare(new i(n,s)),Le}var Ie,yt;function Gr(){if(yt)return Ie;yt=1;const i=B();return Ie=(r,n,s)=>i(n,r,s),Ie}var we,Ot;function Fr(){if(Ot)return we;Ot=1;const i=B();return we=(r,n)=>i(r,n,!0),we}var $e,Tt;function Qe(){if(Tt)return $e;Tt=1;const i=M();return $e=(r,n,s)=>{const c=new i(r,s),u=new i(n,s);return c.compare(u)||c.compareBuild(u)},$e}var Se,At;function Mr(){if(At)return Se;At=1;const i=Qe();return Se=(r,n)=>r.sort((s,c)=>i(s,c,n)),Se}var Ne,xt;function Br(){if(xt)return Ne;xt=1;const i=Qe();return Ne=(r,n)=>r.sort((s,c)=>i(c,s,n)),Ne}var ye,Pt;function ne(){if(Pt)return ye;Pt=1;const i=B();return ye=(r,n,s)=>i(r,n,s)>0,ye}var Oe,Ct;function et(){if(Ct)return Oe;Ct=1;const i=B();return Oe=(r,n,s)=>i(r,n,s)<0,Oe}var Te,bt;function fr(){if(bt)return Te;bt=1;const i=B();return Te=(r,n,s)=>i(r,n,s)===0,Te}var Ae,_t;function hr(){if(_t)return Ae;_t=1;const i=B();return Ae=(r,n,s)=>i(r,n,s)!==0,Ae}var xe,qt;function tt(){if(qt)return xe;qt=1;const i=B();return xe=(r,n,s)=>i(r,n,s)>=0,xe}var Pe,Dt;function rt(){if(Dt)return Pe;Dt=1;const i=B();return Pe=(r,n,s)=>i(r,n,s)<=0,Pe}var Ce,Ut;function dr(){if(Ut)return Ce;Ut=1;const i=fr(),e=hr(),r=ne(),n=tt(),s=et(),c=rt();return Ce=(l,o,a,t)=>{switch(o){case"===":return typeof l=="object"&&(l=l.version),typeof a=="object"&&(a=a.version),l===a;case"!==":return typeof l=="object"&&(l=l.version),typeof a=="object"&&(a=a.version),l!==a;case"":case"=":case"==":return i(l,a,t);case"!=":return e(l,a,t);case">":return r(l,a,t);case">=":return n(l,a,t);case"<":return s(l,a,t);case"<=":return c(l,a,t);default:throw new TypeError(`Invalid operator: ${o}`)}},Ce}var be,jt;function Xr(){if(jt)return be;jt=1;const i=M(),e=W(),{safeRe:r,t:n}=Z();return be=(c,u)=>{if(c instanceof i)return c;if(typeof c=="number"&&(c=String(c)),typeof c!="string")return null;u=u||{};let l=null;if(!u.rtl)l=c.match(u.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const I=u.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let x;for(;(x=I.exec(c))&&(!l||l.index+l[0].length!==c.length);)(!l||x.index+x[0].length!==l.index+l[0].length)&&(l=x),I.lastIndex=x.index+x[1].length+x[2].length;I.lastIndex=-1}if(l===null)return null;const o=l[2],a=l[3]||"0",t=l[4]||"0",f=u.includePrerelease&&l[5]?`-${l[5]}`:"",m=u.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${o}.${a}.${t}${f}${m}`,u)},be}var _e,Gt;function kr(){if(Gt)return _e;Gt=1;class i{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const c=this.map.keys().next().value;this.delete(c)}this.map.set(r,n)}return this}}return _e=i,_e}var qe,Ft;function X(){if(Ft)return qe;Ft=1;const i=/\s+/g;class e{constructor(v,S){if(S=s(S),v instanceof e)return v.loose===!!S.loose&&v.includePrerelease===!!S.includePrerelease?v:new e(v.raw,S);if(v instanceof c)return this.raw=v.value,this.set=[[v]],this.formatted=void 0,this;if(this.options=S,this.loose=!!S.loose,this.includePrerelease=!!S.includePrerelease,this.raw=v.trim().replace(i," "),this.set=this.raw.split("||").map(w=>this.parseRange(w.trim())).filter(w=>w.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const w=this.set[0];if(this.set=this.set.filter(N=>!R(N[0])),this.set.length===0)this.set=[w];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&O(N[0])){this.set=[N];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let v=0;v<this.set.length;v++){v>0&&(this.formatted+="||");const S=this.set[v];for(let w=0;w<S.length;w++)w>0&&(this.formatted+=" "),this.formatted+=S[w].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(v){const w=((this.options.includePrerelease&&I)|(this.options.loose&&x))+":"+v,N=n.get(w);if(N)return N;const $=this.options.loose,y=$?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE];v=v.replace(y,k(this.options.includePrerelease)),u("hyphen replace",v),v=v.replace(o[a.COMPARATORTRIM],t),u("comparator trim",v),v=v.replace(o[a.TILDETRIM],f),u("tilde trim",v),v=v.replace(o[a.CARETTRIM],m),u("caret trim",v);let _=v.split(" ").map(U=>D(U,this.options)).join(" ").split(/\s+/).map(U=>G(U,this.options));$&&(_=_.filter(U=>(u("loose invalid filter",U,this.options),!!U.match(o[a.COMPARATORLOOSE])))),u("range list",_);const A=new Map,q=_.map(U=>new c(U,this.options));for(const U of q){if(R(U))return[U];A.set(U.value,U)}A.size>1&&A.has("")&&A.delete("");const F=[...A.values()];return n.set(w,F),F}intersects(v,S){if(!(v instanceof e))throw new TypeError("a Range is required");return this.set.some(w=>C(w,S)&&v.set.some(N=>C(N,S)&&w.every($=>N.every(y=>$.intersects(y,S)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new l(v,this.options)}catch{return!1}for(let S=0;S<this.set.length;S++)if(H(this.set[S],v,this.options))return!0;return!1}}qe=e;const r=kr(),n=new r,s=Je(),c=se(),u=re(),l=M(),{safeRe:o,t:a,comparatorTrimReplace:t,tildeTrimReplace:f,caretTrimReplace:m}=Z(),{FLAG_INCLUDE_PRERELEASE:I,FLAG_LOOSE:x}=te(),R=L=>L.value==="<0.0.0-0",O=L=>L.value==="",C=(L,v)=>{let S=!0;const w=L.slice();let N=w.pop();for(;S&&w.length;)S=w.every($=>N.intersects($,v)),N=w.pop();return S},D=(L,v)=>(u("comp",L,v),L=p(L,v),u("caret",L),L=d(L,v),u("tildes",L),L=E(L,v),u("xrange",L),L=T(L,v),u("stars",L),L),b=L=>!L||L.toLowerCase()==="x"||L==="*",d=(L,v)=>L.trim().split(/\s+/).map(S=>h(S,v)).join(" "),h=(L,v)=>{const S=v.loose?o[a.TILDELOOSE]:o[a.TILDE];return L.replace(S,(w,N,$,y,_)=>{u("tilde",L,w,N,$,y,_);let A;return b(N)?A="":b($)?A=`>=${N}.0.0 <${+N+1}.0.0-0`:b(y)?A=`>=${N}.${$}.0 <${N}.${+$+1}.0-0`:_?(u("replaceTilde pr",_),A=`>=${N}.${$}.${y}-${_} <${N}.${+$+1}.0-0`):A=`>=${N}.${$}.${y} <${N}.${+$+1}.0-0`,u("tilde return",A),A})},p=(L,v)=>L.trim().split(/\s+/).map(S=>g(S,v)).join(" "),g=(L,v)=>{u("caret",L,v);const S=v.loose?o[a.CARETLOOSE]:o[a.CARET],w=v.includePrerelease?"-0":"";return L.replace(S,(N,$,y,_,A)=>{u("caret",L,N,$,y,_,A);let q;return b($)?q="":b(y)?q=`>=${$}.0.0${w} <${+$+1}.0.0-0`:b(_)?$==="0"?q=`>=${$}.${y}.0${w} <${$}.${+y+1}.0-0`:q=`>=${$}.${y}.0${w} <${+$+1}.0.0-0`:A?(u("replaceCaret pr",A),$==="0"?y==="0"?q=`>=${$}.${y}.${_}-${A} <${$}.${y}.${+_+1}-0`:q=`>=${$}.${y}.${_}-${A} <${$}.${+y+1}.0-0`:q=`>=${$}.${y}.${_}-${A} <${+$+1}.0.0-0`):(u("no pr"),$==="0"?y==="0"?q=`>=${$}.${y}.${_}${w} <${$}.${y}.${+_+1}-0`:q=`>=${$}.${y}.${_}${w} <${$}.${+y+1}.0-0`:q=`>=${$}.${y}.${_} <${+$+1}.0.0-0`),u("caret return",q),q})},E=(L,v)=>(u("replaceXRanges",L,v),L.split(/\s+/).map(S=>P(S,v)).join(" ")),P=(L,v)=>{L=L.trim();const S=v.loose?o[a.XRANGELOOSE]:o[a.XRANGE];return L.replace(S,(w,N,$,y,_,A)=>{u("xRange",L,w,N,$,y,_,A);const q=b($),F=q||b(y),U=F||b(_),Y=U;return N==="="&&Y&&(N=""),A=v.includePrerelease?"-0":"",q?N===">"||N==="<"?w="<0.0.0-0":w="*":N&&Y?(F&&(y=0),_=0,N===">"?(N=">=",F?($=+$+1,y=0,_=0):(y=+y+1,_=0)):N==="<="&&(N="<",F?$=+$+1:y=+y+1),N==="<"&&(A="-0"),w=`${N+$}.${y}.${_}${A}`):F?w=`>=${$}.0.0${A} <${+$+1}.0.0-0`:U&&(w=`>=${$}.${y}.0${A} <${$}.${+y+1}.0-0`),u("xRange return",w),w})},T=(L,v)=>(u("replaceStars",L,v),L.trim().replace(o[a.STAR],"")),G=(L,v)=>(u("replaceGTE0",L,v),L.trim().replace(o[v.includePrerelease?a.GTE0PRE:a.GTE0],"")),k=L=>(v,S,w,N,$,y,_,A,q,F,U,Y)=>(b(w)?S="":b(N)?S=`>=${w}.0.0${L?"-0":""}`:b($)?S=`>=${w}.${N}.0${L?"-0":""}`:y?S=`>=${S}`:S=`>=${S}${L?"-0":""}`,b(q)?A="":b(F)?A=`<${+q+1}.0.0-0`:b(U)?A=`<${q}.${+F+1}.0-0`:Y?A=`<=${q}.${F}.${U}-${Y}`:L?A=`<${q}.${F}.${+U+1}-0`:A=`<=${A}`,`${S} ${A}`.trim()),H=(L,v,S)=>{for(let w=0;w<L.length;w++)if(!L[w].test(v))return!1;if(v.prerelease.length&&!S.includePrerelease){for(let w=0;w<L.length;w++)if(u(L[w].semver),L[w].semver!==c.ANY&&L[w].semver.prerelease.length>0){const N=L[w].semver;if(N.major===v.major&&N.minor===v.minor&&N.patch===v.patch)return!0}return!1}return!0};return qe}var De,Mt;function se(){if(Mt)return De;Mt=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(t,f){if(f=r(f),t instanceof e){if(t.loose===!!f.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),u("comparator",t,f),this.options=f,this.loose=!!f.loose,this.parse(t),this.semver===i?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(t){const f=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],m=t.match(f);if(!m)throw new TypeError(`Invalid comparator: ${t}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new l(m[2],this.options.loose):this.semver=i}toString(){return this.value}test(t){if(u("Comparator.test",t,this.options.loose),this.semver===i||t===i)return!0;if(typeof t=="string")try{t=new l(t,this.options)}catch{return!1}return c(t,this.operator,this.semver,this.options)}intersects(t,f){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(t.value,f).test(this.value):t.operator===""?t.value===""?!0:new o(this.value,f).test(t.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||c(this.semver,"<",t.semver,f)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||c(this.semver,">",t.semver,f)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}De=e;const r=Je(),{safeRe:n,t:s}=Z(),c=dr(),u=re(),l=M(),o=X();return De}var Ue,Bt;function ie(){if(Bt)return Ue;Bt=1;const i=X();return Ue=(r,n,s)=>{try{n=new i(n,s)}catch{return!1}return n.test(r)},Ue}var je,Xt;function Vr(){if(Xt)return je;Xt=1;const i=X();return je=(r,n)=>new i(r,n).set.map(s=>s.map(c=>c.value).join(" ").trim().split(" ")),je}var Ge,kt;function zr(){if(kt)return Ge;kt=1;const i=M(),e=X();return Ge=(n,s,c)=>{let u=null,l=null,o=null;try{o=new e(s,c)}catch{return null}return n.forEach(a=>{o.test(a)&&(!u||l.compare(a)===-1)&&(u=a,l=new i(u,c))}),u},Ge}var Fe,Vt;function Hr(){if(Vt)return Fe;Vt=1;const i=M(),e=X();return Fe=(n,s,c)=>{let u=null,l=null,o=null;try{o=new e(s,c)}catch{return null}return n.forEach(a=>{o.test(a)&&(!u||l.compare(a)===1)&&(u=a,l=new i(u,c))}),u},Fe}var Me,zt;function Wr(){if(zt)return Me;zt=1;const i=M(),e=X(),r=ne();return Me=(s,c)=>{s=new e(s,c);let u=new i("0.0.0");if(s.test(u)||(u=new i("0.0.0-0"),s.test(u)))return u;u=null;for(let l=0;l<s.set.length;++l){const o=s.set[l];let a=null;o.forEach(t=>{const f=new i(t.semver.version);switch(t.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!a||r(f,a))&&(a=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),a&&(!u||r(u,a))&&(u=a)}return u&&s.test(u)?u:null},Me}var Be,Ht;function Yr(){if(Ht)return Be;Ht=1;const i=X();return Be=(r,n)=>{try{return new i(r,n).range||"*"}catch{return null}},Be}var Xe,Wt;function nt(){if(Wt)return Xe;Wt=1;const i=M(),e=se(),{ANY:r}=e,n=X(),s=ie(),c=ne(),u=et(),l=rt(),o=tt();return Xe=(t,f,m,I)=>{t=new i(t,I),f=new n(f,I);let x,R,O,C,D;switch(m){case">":x=c,R=l,O=u,C=">",D=">=";break;case"<":x=u,R=o,O=c,C="<",D="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,f,I))return!1;for(let b=0;b<f.set.length;++b){const d=f.set[b];let h=null,p=null;if(d.forEach(g=>{g.semver===r&&(g=new e(">=0.0.0")),h=h||g,p=p||g,x(g.semver,h.semver,I)?h=g:O(g.semver,p.semver,I)&&(p=g)}),h.operator===C||h.operator===D||(!p.operator||p.operator===C)&&R(t,p.semver))return!1;if(p.operator===D&&O(t,p.semver))return!1}return!0},Xe}var ke,Yt;function Kr(){if(Yt)return ke;Yt=1;const i=nt();return ke=(r,n,s)=>i(r,n,">",s),ke}var Ve,Kt;function Zr(){if(Kt)return Ve;Kt=1;const i=nt();return Ve=(r,n,s)=>i(r,n,"<",s),Ve}var ze,Zt;function Jr(){if(Zt)return ze;Zt=1;const i=X();return ze=(r,n,s)=>(r=new i(r,s),n=new i(n,s),r.intersects(n,s)),ze}var He,Jt;function Qr(){if(Jt)return He;Jt=1;const i=ie(),e=B();return He=(r,n,s)=>{const c=[];let u=null,l=null;const o=r.sort((m,I)=>e(m,I,s));for(const m of o)i(m,n,s)?(l=m,u||(u=m)):(l&&c.push([u,l]),l=null,u=null);u&&c.push([u,null]);const a=[];for(const[m,I]of c)m===I?a.push(m):!I&&m===o[0]?a.push("*"):I?m===o[0]?a.push(`<=${I}`):a.push(`${m} - ${I}`):a.push(`>=${m}`);const t=a.join(" || "),f=typeof n.raw=="string"?n.raw:String(n);return t.length<f.length?t:n},He}var We,Qt;function en(){if(Qt)return We;Qt=1;const i=X(),e=se(),{ANY:r}=e,n=ie(),s=B(),c=(f,m,I={})=>{if(f===m)return!0;f=new i(f,I),m=new i(m,I);let x=!1;e:for(const R of f.set){for(const O of m.set){const C=o(R,O,I);if(x=x||C!==null,C)continue e}if(x)return!1}return!0},u=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],o=(f,m,I)=>{if(f===m)return!0;if(f.length===1&&f[0].semver===r){if(m.length===1&&m[0].semver===r)return!0;I.includePrerelease?f=u:f=l}if(m.length===1&&m[0].semver===r){if(I.includePrerelease)return!0;m=l}const x=new Set;let R,O;for(const E of f)E.operator===">"||E.operator===">="?R=a(R,E,I):E.operator==="<"||E.operator==="<="?O=t(O,E,I):x.add(E.semver);if(x.size>1)return null;let C;if(R&&O){if(C=s(R.semver,O.semver,I),C>0)return null;if(C===0&&(R.operator!==">="||O.operator!=="<="))return null}for(const E of x){if(R&&!n(E,String(R),I)||O&&!n(E,String(O),I))return null;for(const P of m)if(!n(E,String(P),I))return!1;return!0}let D,b,d,h,p=O&&!I.includePrerelease&&O.semver.prerelease.length?O.semver:!1,g=R&&!I.includePrerelease&&R.semver.prerelease.length?R.semver:!1;p&&p.prerelease.length===1&&O.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const E of m){if(h=h||E.operator===">"||E.operator===">=",d=d||E.operator==="<"||E.operator==="<=",R){if(g&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===g.major&&E.semver.minor===g.minor&&E.semver.patch===g.patch&&(g=!1),E.operator===">"||E.operator===">="){if(D=a(R,E,I),D===E&&D!==R)return!1}else if(R.operator===">="&&!n(R.semver,String(E),I))return!1}if(O){if(p&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===p.major&&E.semver.minor===p.minor&&E.semver.patch===p.patch&&(p=!1),E.operator==="<"||E.operator==="<="){if(b=t(O,E,I),b===E&&b!==O)return!1}else if(O.operator==="<="&&!n(O.semver,String(E),I))return!1}if(!E.operator&&(O||R)&&C!==0)return!1}return!(R&&d&&!O&&C!==0||O&&h&&!R&&C!==0||g||p)},a=(f,m,I)=>{if(!f)return m;const x=s(f.semver,m.semver,I);return x>0?f:x<0||m.operator===">"&&f.operator===">="?m:f},t=(f,m,I)=>{if(!f)return m;const x=s(f.semver,m.semver,I);return x<0?f:x>0||m.operator==="<"&&f.operator==="<="?m:f};return We=c,We}var Ye,er;function tn(){if(er)return Ye;er=1;const i=Z(),e=te(),r=M(),n=lr(),s=W(),c=Pr(),u=Cr(),l=br(),o=_r(),a=qr(),t=Dr(),f=Ur(),m=jr(),I=B(),x=Gr(),R=Fr(),O=Qe(),C=Mr(),D=Br(),b=ne(),d=et(),h=fr(),p=hr(),g=tt(),E=rt(),P=dr(),T=Xr(),G=se(),k=X(),H=ie(),L=Vr(),v=zr(),S=Hr(),w=Wr(),N=Yr(),$=nt(),y=Kr(),_=Zr(),A=Jr(),q=Qr(),F=en();return Ye={parse:s,valid:c,clean:u,inc:l,diff:o,major:a,minor:t,patch:f,prerelease:m,compare:I,rcompare:x,compareLoose:R,compareBuild:O,sort:C,rsort:D,gt:b,lt:d,eq:h,neq:p,gte:g,lte:E,cmp:P,coerce:T,Comparator:G,Range:k,satisfies:H,toComparators:L,maxSatisfying:v,minSatisfying:S,minVersion:w,validRange:N,outside:$,gtr:y,ltr:_,intersects:A,simplifyRange:q,subset:F,SemVer:r,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},Ye}var rn=tn();const tr=ar(rn);var j;(function(i){i.blue="blue",i.nanoS="nanoS",i.nanoSP="nanoSP",i.nanoX="nanoX",i.stax="stax",i.europa="europa"})(j||(j={}));const Ke={[j.blue]:{id:j.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:i=>4*1024},[j.nanoS]:{id:j.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:i=>tr.lt(tr.coerce(i)??"","2.0.0")?4*1024:2*1024},[j.nanoX]:{id:j.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:i=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[j.nanoSP]:{id:j.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:i=>32},[j.stax]:{id:j.stax,productName:"Ledger Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:i=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[j.europa]:{id:j.europa,productName:"Ledger Flex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:i=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};j.blue,j.nanoS,j.nanoSP,j.nanoX,j.stax,j.europa;const rr=Object.values(Ke),pr=11415,nr=i=>{const e=rr.find(s=>s.legacyUsbProductId===i);if(e)return e;const r=i>>8;return rr.find(s=>s.productIdMM===r)},nn=[],sr={};for(const i in Ke){const e=Ke[i],{bluetoothSpec:r}=e;if(r)for(let n=0;n<r.length;n++){const s=r[n];nn.push(s.serviceUuid),sr[s.serviceUuid]=sr[s.serviceUuid.replace(/-/g,"")]={deviceModel:e,...s}}}const sn=[{vendorId:pr}];async function mr(){return await navigator.usb.requestDevice({filters:sn})}async function Ze(){return(await navigator.usb.getDevices()).filter(e=>e.vendorId===pr)}async function on(){const i=await Ze();return i.length>0?i[0]:mr()}const an=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),cn=1,ir=3;class ee extends Or{device;deviceModel;channel=Math.floor(Math.random()*65535);packetSize=64;interfaceNumber;constructor(e,r){super(),this.device=e,this.interfaceNumber=r,this.deviceModel=nr(e.productId)}static isSupported=an;static list=Ze;static listen=e=>{let r=!1;on().then(s=>{if(!r){const c=nr(s.productId);e.next({type:"add",descriptor:s,deviceModel:c}),e.complete()}},s=>{window.DOMException&&s instanceof window.DOMException&&s.code===18?e.error(new vr(s.message)):e.error(new Rr(s.message))});function n(){r=!0}return{unsubscribe:n}};static async request(){const e=await mr();return ee.open(e)}static async openConnected(){const e=await Ze();return e.length===0?null:ee.open(e[0])}static async open(e){await e.open(),e.configuration===null&&await e.selectConfiguration(cn),await or(e);const r=e.configurations[0].interfaces.find(({alternates:u})=>u.some(l=>l.interfaceClass===255));if(!r)throw new ot("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=r.interfaceNumber;try{await e.claimInterface(n)}catch(u){throw await e.close(),new ot(u.message)}const s=new ee(e,n),c=u=>{e===u.device&&(navigator.usb.removeEventListener("disconnect",c),s._emitDisconnect(new Lr))};return navigator.usb.addEventListener("disconnect",c),s}_disconnectEmitted=!1;_emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))};async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await or(this.device),await this.device.close()}async exchange(e){return await this.exchangeAtomicImpl(async()=>{const{channel:n,packetSize:s}=this;ct("apdu","=> "+e.toString("hex"));const c=xr(n,s),u=c.makeBlocks(e);for(let a=0;a<u.length;a++)await this.device.transferOut(ir,u[a]);let l,o;for(;!(l=c.getReducedResult(o));){const a=await this.device.transferIn(ir,s),t=Buffer.from(a.data.buffer);o=c.reduceResponse(o,t)}return ct("apdu","<= "+l.toString("hex")),l}).catch(n=>{throw n&&n.message&&n.message.includes("disconnected")?(this._emitDisconnect(n),new gr(n.message)):n})}setScrambleKey(){}}async function or(i){try{await i.reset()}catch(e){console.warn(e)}}export{ee as default};
