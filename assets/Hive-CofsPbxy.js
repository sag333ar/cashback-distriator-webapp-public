import{g as Ir,a as Hr}from"./index-DGCbFdxj.js";import{l as Rr}from"./index-DIX96GLX.js";var Y={},Z={},We,ft;function Pr(){if(ft)return We;ft=1;const n=2147483648;var t=function(r){if(!Array.isArray(r))throw new Error("Input must be an Array");if(r.length===0)throw new Error("Path must contain at least one level");for(var s=0;s<r.length;s++)if(typeof r[s]!="number")throw new Error("Path element is not a number");this.path=r};return t.validatePathArray=function(r){try{return t.fromPathArray(r),!0}catch{return!1}},t.validateString=function(r,s){try{return t.fromString(r,s),!0}catch{return!1}},t.fromPathArray=function(r){return new t(r)},t.fromString=function(r,s){if(/^m\//i.test(r))r=r.slice(2);else if(s)throw new Error("Root element is required");for(var u=r.split("/"),e=new Array(u.length),a=0;a<u.length;a++){var c=/(\d+)([hH\']?)/.exec(u[a]);if(c===null)throw new Error("Invalid input");if(e[a]=parseInt(c[1],10),e[a]>=n)throw new Error("Invalid child index");if(c[2]==="h"||c[2]==="H"||c[2]==="'")e[a]+=n;else if(c[2].length!=0)throw new Error("Invalid modifier")}return new t(e)},t.prototype.toPathArray=function(){return this.path},t.prototype.toString=function(r,s){for(var u=new Array(this.path.length),e=0;e<this.path.length;e++){var a=this.path[e];a&n?u[e]=(a&~n)+(s?"h":"'"):u[e]=a}return(r?"":"m/")+u.join("/")},t.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"},We=t,We}var lt;function Ur(){if(lt)return Z;lt=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.Path=void 0;const n=Pr();let t=class{constructor(s){this.bipArray=n.fromString(s).toPathArray()}encode(){const s=Buffer.alloc(1+this.bipArray.length*4);return s.writeInt8(this.bipArray.length),this.bipArray.forEach((u,e)=>{s.writeUInt32BE(u,1+e*4)}),s}get size(){return this.bipArray.length}};return Z.Path=t,Z}var ke={},Q={},ee={},te={},ht;function R(){if(ht)return te;ht=1,Object.defineProperty(te,"__esModule",{value:!0}),te.OperationEncoder=void 0;let n=class{constructor(r){this.operationId=r}};return te.OperationEncoder=n,te}var J={},Ge,_t;function qr(){if(_t)return Ge;_t=1,Ge=s;var n=128,t=-128,r=Math.pow(2,31);function s(u,e,a){if(Number.MAX_SAFE_INTEGER&&u>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");e=e||[],a=a||0;for(var c=a;u>=r;)e[a++]=u&255|n,u/=128;for(;u&t;)e[a++]=u&255|n,u>>>=7;return e[a]=u|0,s.bytes=a-c+1,e}return Ge}var ze,pt;function jr(){if(pt)return ze;pt=1,ze=r;var n=128,t=127;function r(s,a){var e=0,a=a||0,c=0,o=a,i,f=s.length;do{if(o>=f||c>49)throw r.bytes=0,new RangeError("Could not decode varint");i=s[o++],e+=c<28?(i&t)<<c:(i&t)*Math.pow(2,c),c+=7}while(i>=n);return r.bytes=o-a,e}return ze}var Ke,vt;function Lr(){if(vt)return Ke;vt=1;var n=Math.pow(2,7),t=Math.pow(2,14),r=Math.pow(2,21),s=Math.pow(2,28),u=Math.pow(2,35),e=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),o=Math.pow(2,63);return Ke=function(i){return i<n?1:i<t?2:i<r?3:i<s?4:i<u?5:i<e?6:i<a?7:i<c?8:i<o?9:10},Ke}var Je,gt;function Mr(){return gt||(gt=1,Je={encode:qr(),decode:jr(),encodingLength:Lr()}),Je}var Xe,Et;function Nr(){if(Et)return Xe;Et=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var u=0;u<t.length;u++){var e=t.charAt(u),a=e.charCodeAt(0);if(r[a]!==255)throw new TypeError(e+" is ambiguous");r[a]=u}var c=t.length,o=t.charAt(0),i=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var _=0,x=0,U=0,I=h.length;U!==I&&h[U]===0;)U++,_++;for(var m=(I-U)*f+1>>>0,L=new Uint8Array(m);U!==I;){for(var y=h[U],O=0,T=m-1;(y!==0||O<x)&&T!==-1;T--,O++)y+=256*L[T]>>>0,L[T]=y%c>>>0,y=y/c>>>0;if(y!==0)throw new Error("Non-zero carry");x=O,U++}for(var B=m-x;B!==m&&L[B]===0;)B++;for(var v=o.repeat(_);B<m;++B)v+=t.charAt(L[B]);return v}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var _=0,x=0,U=0;h[_]===o;)x++,_++;for(var I=(h.length-_)*i+1>>>0,m=new Uint8Array(I);h[_];){var L=h.charCodeAt(_);if(L>255)return;var y=r[L];if(y===255)return;for(var O=0,T=I-1;(y!==0||O<U)&&T!==-1;T--,O++)y+=c*m[T]>>>0,m[T]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");U=O,_++}for(var B=I-U;B!==I&&m[B]===0;)B++;for(var v=new Uint8Array(x+(I-B)),g=x;B!==I;)v[g++]=m[B++];return v}function S(h){var _=p(h);if(_)return _;throw new Error("Non-base"+c+" character")}return{encode:d,decodeUnsafe:p,decode:S}}return Xe=n,Xe}var Ye,bt;function Dr(){return bt||(bt=1,Ye=Nr()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Ye}var St;function H(){if(St)return J;St=1;var n=J&&J.__createBinding||(Object.create?function(a,c,o,i){i===void 0&&(i=o);var f=Object.getOwnPropertyDescriptor(c,o);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[o]}}),Object.defineProperty(a,i,f)}:function(a,c,o,i){i===void 0&&(i=o),a[i]=c[o]}),t=J&&J.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),r=J&&J.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var o in a)o!=="default"&&Object.prototype.hasOwnProperty.call(a,o)&&n(c,a,o);return t(c,a),c};Object.defineProperty(J,"__esModule",{value:!0}),J.Encoder=void 0;const s=r(Mr()),u=Dr();let e=class{};return J.Encoder=e,e.precisionTable={HIVE:3,HBD:3,STEEM:3,SBD:3,TBD:3,TESTS:3,VESTS:6},e.encodeOperationType=a=>Buffer.alloc(1,a),e.encodeBoolean=a=>Buffer.from([a?1:0]),e.encodeDateTime=a=>{const c=new Date(a+"Z").getTime()/1e3;return e.encodeUInt32(c)},e.encodeString=a=>a?Buffer.concat([e.encodeVarint32(a.length),Buffer.from(a)]):Buffer.from([0]),e.encodeUInt8=a=>{const c=Buffer.alloc(1);return c.writeUInt8(a),c},e.encodeUInt16=a=>{const c=Buffer.alloc(2);return c.writeUInt16LE(a),c},e.encodeInt16=a=>{const c=Buffer.alloc(2);return c.writeInt16LE(a),c},e.encodeUInt32=a=>{const c=Buffer.alloc(4);return c.writeUInt32LE(a),c},e.encodeUInt64=a=>{const c=Buffer.alloc(8);let o=a.toString(16);for(;o.length<16;)o="0"+o;return c.write(o,0,8,"hex"),c.reverse()},e.encodeVarint32=a=>Buffer.from(s.encode(a)),e.encodeAsset=a=>{const c=Buffer.alloc(16),[o,i]=a.split(" "),f=e.precisionTable[e.convertAssetSybol(i)];let d=Math.round(parseFloat(o)*Math.pow(10,f));e.encodeUInt64(d).copy(c,0),c.writeUInt8(f,8);for(let p=0;p<e.convertAssetSybol(i).length;p++)c.writeUInt8(e.convertAssetSybol(i).charCodeAt(p),9+p);return c},e.Array=(a,c)=>{var o,i;return Buffer.concat([e.encodeVarint32((o=c?.length)!==null&&o!==void 0?o:0),...(i=c?.map(a))!==null&&i!==void 0?i:[]])},e.Optional=(a,c)=>c?Buffer.concat([Buffer.from([1]),a(c)]):Buffer.from([0]),e.encodePublicKey=a=>{const c=a.slice(3),o=u.decode(c);return o.slice(0,o.length-4)},e.encodeAuthorityType=a=>Buffer.concat([e.encodeUInt32(a.weight_threshold),e.Array(c=>Buffer.concat([e.encodeString(c[0]),e.encodeUInt16(c[1])]),a.account_auths),e.Array(c=>Buffer.concat([e.encodePublicKey(c[0]),e.encodeUInt16(c[1])]),a.key_auths)]),e.encodeEmpty=()=>{throw new Error("This field is not supported yet.")},e.convertAssetSybol=a=>{switch(a){case"HIVE":return"STEEM";case"HBD":return"SBD";default:return a}},J}var re={},At;function P(){if(At)return re;At=1,Object.defineProperty(re,"__esModule",{value:!0}),re.Validator=void 0;const n=127;let t=class{};return re.Validator=t,t.validateString=r=>r.length<=n,t.validateAuthorityType=r=>{if(!r)return!0;const s=r.account_auths.map(a=>`[ ${a[0]}, ${a[1]} ]`).join(", "),u=r.key_auths.map(a=>`[ ${a[0]}, ${a[1]} ]`).join(", "),e=`Weight: ${r.weight_threshold}, [ ${s} ], [ ${u} ]`;return t.validateString(e)},t.validateArrayOfStrings=r=>{const s=`[ ${r.join(", ")} ]`;return t.validateString(s)},t.validateArrayOfUInt64=r=>{const s=`[ ${r.join(", ")} ]`;return t.validateString(s)},t.validateBeneficiaries=r=>{const s=`Beneficiaries: [ ${r.map(u=>`[ ${u.account}, ${(u.weight/100).toFixed(2)}% ]`).join(", ")} ]`;return t.validateString(s)},re}var xt;function Fr(){if(xt)return ee;xt=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.Vote=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.voter),t.Encoder.encodeString(e.author),t.Encoder.encodeString(e.permlink),t.Encoder.encodeInt16(e.weight)])}validate(e){return r.Validator.validateString(e.voter)&&r.Validator.validateString(e.author)&&r.Validator.validateString(e.permlink)}};return ee.Vote=s,ee}var ne={},mt;function $r(){if(mt)return ne;mt=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.Transfer=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from),t.Encoder.encodeString(e.to),t.Encoder.encodeAsset(e.amount),t.Encoder.encodeString(e.memo)])}validate(e){return r.Validator.validateString(e.from)&&r.Validator.validateString(e.to)&&r.Validator.validateString(e.memo)}};return ne.Transfer=s,ne}var oe={},yt;function Wr(){if(yt)return oe;yt=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.Comment=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.parent_author),t.Encoder.encodeString(e.parent_permlink),t.Encoder.encodeString(e.author),t.Encoder.encodeString(e.permlink),t.Encoder.encodeString(e.title),t.Encoder.encodeString(e.body),t.Encoder.encodeString(e.json_metadata)])}validate(e){return r.Validator.validateString(e.parent_author)&&r.Validator.validateString(e.parent_permlink)&&r.Validator.validateString(e.author)&&r.Validator.validateString(e.permlink)&&r.Validator.validateString(e.title)&&r.Validator.validateString(e.body)&&r.Validator.validateString(e.json_metadata)}};return oe.Comment=s,oe}var ie={},wt;function kr(){if(wt)return ie;wt=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.AccountWitnessVote=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeString(e.witness),t.Encoder.encodeBoolean(e.approve)])}validate(e){return r.Validator.validateString(e.account)&&r.Validator.validateString(e.witness)}};return ie.AccountWitnessVote=s,ie}var ce={},Vt;function Gr(){if(Vt)return ce;Vt=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.AccountWitnessProxy=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeString(e.proxy)])}validate(e){return r.Validator.validateString(e.account)&&r.Validator.validateString(e.proxy)}};return ce.AccountWitnessProxy=s,ce}var se={},Ot;function zr(){if(Ot)return se;Ot=1,Object.defineProperty(se,"__esModule",{value:!0}),se.ChangeRecoveryAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account_to_recover),t.Encoder.encodeString(e.new_recovery_account),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.account_to_recover)&&r.Validator.validateString(e.new_recovery_account)}};return se.ChangeRecoveryAccount=s,se}var ae={},Bt;function Kr(){if(Bt)return ae;Bt=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.TransferFromSavings=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from),t.Encoder.encodeUInt32(e.request_id),t.Encoder.encodeString(e.to),t.Encoder.encodeAsset(e.amount),t.Encoder.encodeString(e.memo)])}validate(e){return r.Validator.validateString(e.from)&&r.Validator.validateString(e.to)&&r.Validator.validateString(e.memo)}};return ae.TransferFromSavings=s,ae}var de={},Ct;function Jr(){if(Ct)return de;Ct=1,Object.defineProperty(de,"__esModule",{value:!0}),de.CancelTransferFromSavings=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from),t.Encoder.encodeUInt32(e.request_id)])}validate(e){return r.Validator.validateString(e.from)}};return de.CancelTransferFromSavings=s,de}var ue={},Tt;function Xr(){if(Tt)return ue;Tt=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.TransferToVesting=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from),t.Encoder.encodeString(e.to),t.Encoder.encodeAsset(e.amount)])}validate(e){return r.Validator.validateString(e.from)&&r.Validator.validateString(e.to)}};return ue.TransferToVesting=s,ue}var fe={},It;function Yr(){if(It)return fe;It=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.WithdrawVesting=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeAsset(e.vesting_shares)])}validate(e){return r.Validator.validateString(e.account)}};return fe.WithdrawVesting=s,fe}var le={},Ht;function Zr(){if(Ht)return le;Ht=1,Object.defineProperty(le,"__esModule",{value:!0}),le.SetWithdrawVestingRoute=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from_account),t.Encoder.encodeString(e.to_account),t.Encoder.encodeUInt16(Number(e.percent)),t.Encoder.encodeBoolean(e.auto_vest)])}validate(e){return r.Validator.validateString(e.from_account)&&r.Validator.validateString(e.to_account)}};return le.SetWithdrawVestingRoute=s,le}var he={},Rt;function Qr(){if(Rt)return he;Rt=1,Object.defineProperty(he,"__esModule",{value:!0}),he.ClaimAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.creator),t.Encoder.encodeAsset(e.fee),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.creator)}};return he.ClaimAccount=s,he}var _e={},Pt;function en(){if(Pt)return _e;Pt=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.CreateClaimedAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.creator),t.Encoder.encodeString(e.new_account_name),t.Encoder.encodeAuthorityType(e.owner),t.Encoder.encodeAuthorityType(e.active),t.Encoder.encodeAuthorityType(e.posting),t.Encoder.encodePublicKey(e.memo_key),t.Encoder.encodeString(e.json_metadata),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.creator)&&r.Validator.validateString(e.new_account_name)&&r.Validator.validateAuthorityType(e.owner)&&r.Validator.validateAuthorityType(e.active)&&r.Validator.validateAuthorityType(e.posting)&&r.Validator.validateString(e.json_metadata)}};return _e.CreateClaimedAccount=s,_e}var pe={},Ut;function tn(){if(Ut)return pe;Ut=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.LimitOrderCreate=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.owner),t.Encoder.encodeUInt32(e.orderid),t.Encoder.encodeAsset(e.amount_to_sell),t.Encoder.encodeAsset(e.min_to_receive),t.Encoder.encodeBoolean(e.fill_or_kill),t.Encoder.encodeDateTime(e.expiration)])}validate(e){return r.Validator.validateString(e.owner)}};return pe.LimitOrderCreate=s,pe}var ve={},qt;function rn(){if(qt)return ve;qt=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.LimitOrderCancel=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.owner),t.Encoder.encodeUInt32(e.orderid)])}validate(e){return r.Validator.validateString(e.owner)}};return ve.LimitOrderCancel=s,ve}var ge={},jt;function nn(){if(jt)return ge;jt=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.FeedPublish=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.publisher),t.Encoder.encodeAsset(e.exchange_rate.base),t.Encoder.encodeAsset(e.exchange_rate.quote)])}validate(e){return r.Validator.validateString(e.publisher)}};return ge.FeedPublish=s,ge}var Ee={},Lt;function on(){if(Lt)return Ee;Lt=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Convert=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.owner),t.Encoder.encodeUInt32(e.requestid),t.Encoder.encodeAsset(e.amount)])}validate(e){return r.Validator.validateString(e.owner)}};return Ee.Convert=s,Ee}var be={},Mt;function cn(){if(Mt)return be;Mt=1,Object.defineProperty(be,"__esModule",{value:!0}),be.AccountCreate=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeAsset(e.fee),t.Encoder.encodeString(e.creator),t.Encoder.encodeString(e.new_account_name),t.Encoder.encodeAuthorityType(e.owner),t.Encoder.encodeAuthorityType(e.active),t.Encoder.encodeAuthorityType(e.posting),t.Encoder.encodePublicKey(e.memo_key),t.Encoder.encodeString(e.json_metadata)])}validate(e){return r.Validator.validateString(e.creator)&&r.Validator.validateString(e.new_account_name)&&r.Validator.validateAuthorityType(e.owner)&&r.Validator.validateAuthorityType(e.active)&&r.Validator.validateAuthorityType(e.posting)&&r.Validator.validateString(e.json_metadata)}};return be.AccountCreate=s,be}var Se={},Nt;function sn(){if(Nt)return Se;Nt=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.AccountUpdate=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.Optional(t.Encoder.encodeAuthorityType,e.owner),t.Encoder.Optional(t.Encoder.encodeAuthorityType,e.active),t.Encoder.Optional(t.Encoder.encodeAuthorityType,e.posting),t.Encoder.encodePublicKey(e.memo_key),t.Encoder.encodeString(e.json_metadata)])}validate(e){return r.Validator.validateString(e.account)&&r.Validator.validateString(e.json_metadata)&&r.Validator.validateAuthorityType(e.owner)&&r.Validator.validateAuthorityType(e.active)&&r.Validator.validateAuthorityType(e.posting)}};return Se.AccountUpdate=s,Se}var Ae={},Dt;function an(){if(Dt)return Ae;Dt=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.WitnessUpdate=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.owner),t.Encoder.encodeString(e.url),t.Encoder.encodePublicKey(e.block_signing_key),t.Encoder.encodeAsset(e.props.account_creation_fee),t.Encoder.encodeUInt32(e.props.maximum_block_size),t.Encoder.encodeUInt16(e.props.hbd_interest_rate),t.Encoder.encodeAsset(e.fee)])}validate(e){return r.Validator.validateString(e.owner)&&r.Validator.validateString(e.url)}};return Ae.WitnessUpdate=s,Ae}var xe={},Ft;function dn(){if(Ft)return xe;Ft=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.DeleteComment=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.author),t.Encoder.encodeString(e.permlink)])}validate(e){return r.Validator.validateString(e.author)&&r.Validator.validateString(e.permlink)}};return xe.DeleteComment=s,xe}var me={},$t;function un(){if($t)return me;$t=1,Object.defineProperty(me,"__esModule",{value:!0}),me.RemoveProposal=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.proposal_owner),t.Encoder.Array(t.Encoder.encodeUInt64,e.proposal_ids),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.proposal_owner)&&r.Validator.validateArrayOfUInt64(e.proposal_ids)}};return me.RemoveProposal=s,me}var ye={},Wt;function fn(){if(Wt)return ye;Wt=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.DeclineVotingRights=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeBoolean(e.decline)])}validate(e){return r.Validator.validateString(e.account)}};return ye.DeclineVotingRights=s,ye}var we={},kt;function ln(){if(kt)return we;kt=1,Object.defineProperty(we,"__esModule",{value:!0}),we.ResetAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.reset_account),t.Encoder.encodeString(e.account_to_reset),t.Encoder.encodeAuthorityType(e.new_owner_authority)])}validate(e){return r.Validator.validateString(e.reset_account)&&r.Validator.validateString(e.account_to_reset)&&r.Validator.validateAuthorityType(e.new_owner_authority)}};return we.ResetAccount=s,we}var Ve={},Gt;function hn(){if(Gt)return Ve;Gt=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.SetResetAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeString(e.current_reset_account),t.Encoder.encodeString(e.reset_account)])}validate(e){return r.Validator.validateString(e.account)&&r.Validator.validateString(e.current_reset_account)&&r.Validator.validateString(e.reset_account)}};return Ve.SetResetAccount=s,Ve}var Oe={},zt;function _n(){if(zt)return Oe;zt=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.RequestAccountRecovery=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.recovery_account),t.Encoder.encodeString(e.account_to_recover),t.Encoder.encodeAuthorityType(e.new_owner_authority),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.recovery_account)&&r.Validator.validateString(e.account_to_recover)&&r.Validator.validateAuthorityType(e.new_owner_authority)}};return Oe.RequestAccountRecovery=s,Oe}var Be={},Kt;function pn(){if(Kt)return Be;Kt=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.CustomJson=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.Array(t.Encoder.encodeString,e.required_auths),t.Encoder.Array(t.Encoder.encodeString,e.required_posting_auths),t.Encoder.encodeString(e.id),t.Encoder.encodeString(e.json)])}validate(e){return r.Validator.validateArrayOfStrings(e.required_auths)&&r.Validator.validateArrayOfStrings(e.required_posting_auths)&&r.Validator.validateString(e.id)&&r.Validator.validateString(e.json)}};return Be.CustomJson=s,Be}var Ce={},Jt;function vn(){if(Jt)return Ce;Jt=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.RecoverAccount=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account_to_recover),t.Encoder.encodeAuthorityType(e.new_owner_authority),t.Encoder.encodeAuthorityType(e.recent_owner_authority),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.account_to_recover)&&r.Validator.validateAuthorityType(e.new_owner_authority)&&r.Validator.validateAuthorityType(e.recent_owner_authority)}};return Ce.RecoverAccount=s,Ce}var Te={},Xt;function gn(){if(Xt)return Te;Xt=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.ClaimRewardBalance=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.account),t.Encoder.encodeAsset(e.reward_hive),t.Encoder.encodeAsset(e.reward_hbd),t.Encoder.encodeAsset(e.reward_vests)])}validate(e){return r.Validator.validateString(e.account)}};return Te.ClaimRewardBalance=s,Te}var Ie={},Yt;function En(){if(Yt)return Ie;Yt=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.DelegateVestingShares=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.delegator),t.Encoder.encodeString(e.delegatee),t.Encoder.encodeAsset(e.vesting_shares)])}validate(e){return r.Validator.validateString(e.delegator)&&r.Validator.validateString(e.delegatee)}};return Ie.DelegateVestingShares=s,Ie}var He={},Zt;function bn(){if(Zt)return He;Zt=1,Object.defineProperty(He,"__esModule",{value:!0}),He.CreateProposal=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.creator),t.Encoder.encodeString(e.receiver),t.Encoder.encodeDateTime(e.start_date),t.Encoder.encodeDateTime(e.end_date),t.Encoder.encodeAsset(e.daily_pay),t.Encoder.encodeString(e.subject),t.Encoder.encodeString(e.permlink),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.creator)&&r.Validator.validateString(e.receiver)&&r.Validator.validateString(e.subject)&&r.Validator.validateString(e.permlink)}};return He.CreateProposal=s,He}var Re={},Qt;function Sn(){if(Qt)return Re;Qt=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.UpdateProposalVotes=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.voter),t.Encoder.Array(t.Encoder.encodeUInt64,e.proposal_ids),t.Encoder.encodeBoolean(e.approve),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.voter)&&r.Validator.validateArrayOfUInt64(e.proposal_ids)}};return Re.UpdateProposalVotes=s,Re}var Pe={},er;function An(){if(er)return Pe;er=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.CommentOptions=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{constructor(){super(...arguments),this.encodeExtensions=e=>{if(!e||e.length===0)return Buffer.from([e?e.length:[].length]);if(e[0][0]!==0)throw new Error("Unsupported extension type");return Buffer.concat([t.Encoder.encodeVarint32(e.length),t.Encoder.encodeVarint32(e[0][0]),t.Encoder.Array(this.encodeBeneficiary,e[0][1].beneficiaries)])},this.encodeBeneficiary=e=>Buffer.concat([t.Encoder.encodeString(e.account),t.Encoder.encodeUInt16(e.weight)])}encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.author),t.Encoder.encodeString(e.permlink),t.Encoder.encodeAsset(e.max_accepted_payout),t.Encoder.encodeUInt16(e.percent_hbd),t.Encoder.encodeBoolean(e.allow_votes),t.Encoder.encodeBoolean(e.allow_curation_rewards),this.encodeExtensions(e.extensions)])}validate(e){let a=r.Validator.validateString(e.author)&&r.Validator.validateString(e.permlink);return e.extensions&&e.extensions.length>0&&(a=a&&r.Validator.validateBeneficiaries(e.extensions[0][1].beneficiaries)),a}};return Pe.CommentOptions=s,Pe}var Ue={},tr;function xn(){if(tr)return Ue;tr=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.RecurrentTransfer=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.from),t.Encoder.encodeString(e.to),t.Encoder.encodeAsset(e.amount),t.Encoder.encodeString(e.memo),t.Encoder.encodeUInt16(e.recurrence),t.Encoder.encodeUInt16(e.executions),t.Encoder.Array(t.Encoder.encodeEmpty,e.extensions)])}validate(e){return r.Validator.validateString(e.from)&&r.Validator.validateString(e.to)&&r.Validator.validateString(e.memo)}};return Ue.RecurrentTransfer=s,Ue}var qe={},rr;function mn(){if(rr)return qe;rr=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.CollateralizedConvert=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeString(e.owner),t.Encoder.encodeUInt32(e.requestid),t.Encoder.encodeAsset(e.amount)])}validate(e){return r.Validator.validateString(e.owner)}};return qe.CollateralizedConvert=s,qe}var je={},nr;function yn(){if(nr)return je;nr=1,Object.defineProperty(je,"__esModule",{value:!0}),je.UpdateProposal=void 0;const n=R(),t=H(),r=P();let s=class extends n.OperationEncoder{constructor(){super(...arguments),this.encodeExtensions=e=>{if(!e||e.length===0)return Buffer.from([e?e.length:[].length]);if(e[0][0]!==1)throw new Error("Unsupported extension type");return Buffer.concat([t.Encoder.encodeUInt8(e.length),t.Encoder.encodeUInt8(e[0][0]),t.Encoder.encodeDateTime(e[0][1].end_date)])}}encode(e){return Buffer.concat([t.Encoder.encodeOperationType(this.operationId),t.Encoder.encodeUInt64(e.proposal_id),t.Encoder.encodeString(e.creator),t.Encoder.encodeAsset(e.daily_pay),t.Encoder.encodeString(e.subject),t.Encoder.encodeString(e.permlink),this.encodeExtensions(e.extensions)])}validate(e){return r.Validator.validateString(e.creator)&&r.Validator.validateString(e.subject)&&r.Validator.validateString(e.permlink)}};return je.UpdateProposal=s,je}var or;function mr(){if(or)return Q;or=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.ParsedOperation=void 0;const n=Fr(),t=$r(),r=Wr(),s=kr(),u=Gr(),e=zr(),a=Kr(),c=Jr(),o=Xr(),i=Yr(),f=Zr(),d=Qr(),p=en(),S=tn(),h=rn(),_=nn(),x=on(),U=cn(),I=sn(),m=an(),L=dn(),y=un(),O=fn(),T=ln(),B=hn(),v=_n(),g=pn(),b=vn(),j=gn(),w=En(),q=bn(),D=Sn(),F=An(),$=xn(),G=mn(),l=yn();let E=class{};return Q.ParsedOperation=E,E.encodersMap=new Map([["vote",new n.Vote(0)],["comment",new r.Comment(1)],["transfer",new t.Transfer(2)],["transfer_to_vesting",new o.TransferToVesting(3)],["withdraw_vesting",new i.WithdrawVesting(4)],["limit_order_create",new S.LimitOrderCreate(5)],["limit_order_cancel",new h.LimitOrderCancel(6)],["feed_publish",new _.FeedPublish(7)],["convert",new x.Convert(8)],["account_create",new U.AccountCreate(9)],["account_update",new I.AccountUpdate(10)],["witness_update",new m.WitnessUpdate(11)],["account_witness_vote",new s.AccountWitnessVote(12)],["account_witness_proxy",new u.AccountWitnessProxy(13)],["delete_comment",new L.DeleteComment(17)],["custom_json",new g.CustomJson(18)],["comment_options",new F.CommentOptions(19)],["set_withdraw_vesting_route",new f.SetWithdrawVestingRoute(20)],["claim_account",new d.ClaimAccount(22)],["create_claimed_account",new p.CreateClaimedAccount(23)],["request_account_recovery",new v.RequestAccountRecovery(24)],["recover_account",new b.RecoverAccount(25)],["change_recovery_account",new e.ChangeRecoveryAccount(26)],["transfer_to_savings",new t.Transfer(32)],["transfer_from_savings",new a.TransferFromSavings(33)],["cancel_transfer_from_savings",new c.CancelTransferFromSavings(34)],["decline_voting_rights",new O.DeclineVotingRights(36)],["reset_account",new T.ResetAccount(37)],["set_reset_account",new B.SetResetAccount(38)],["claim_reward_balance",new j.ClaimRewardBalance(39)],["delegate_vesting_shares",new w.DelegateVestingShares(40)],["create_proposal",new q.CreateProposal(44)],["update_proposal_votes",new D.UpdateProposalVotes(45)],["remove_proposal",new y.RemoveProposal(46)],["update_proposal",new l.UpdateProposal(47)],["collateralized_convert",new G.CollateralizedConvert(48)],["recurrent_transfer",new $.RecurrentTransfer(49)]]),E.encode=A=>{var C;const M=(C=E.encodersMap.get(A[0]))===null||C===void 0?void 0:C.encode(A[1]);if(!M)throw new Error("Unsupported operation type");return M},E.validate=A=>{var C,M;return(M=(C=E.encodersMap.get(A[0]))===null||C===void 0?void 0:C.validate(A[1]))!==null&&M!==void 0?M:!1},Q}var N={},k={},Ze={},Le={},ir;function wn(){return ir||(ir=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.crypto=void 0,Le.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Le}var cr;function yr(){return cr||(cr=1,function(n){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=r,n.anumber=s,n.abytes=u,n.ahash=e,n.aexists=a,n.aoutput=c,n.u8=o,n.u32=i,n.clean=f,n.createView=d,n.rotr=p,n.rotl=S,n.byteSwap=h,n.byteSwap32=_,n.bytesToHex=I,n.hexToBytes=y,n.asyncLoop=T,n.utf8ToBytes=B,n.bytesToUtf8=v,n.toBytes=g,n.kdfInputToBytes=b,n.concatBytes=j,n.checkOpts=w,n.createHasher=D,n.createOptHasher=F,n.createXOFer=$,n.randomBytes=G;const t=wn();function r(l){return l instanceof Uint8Array||ArrayBuffer.isView(l)&&l.constructor.name==="Uint8Array"}function s(l){if(!Number.isSafeInteger(l)||l<0)throw new Error("positive integer expected, got "+l)}function u(l,...E){if(!r(l))throw new Error("Uint8Array expected");if(E.length>0&&!E.includes(l.length))throw new Error("Uint8Array expected of length "+E+", got length="+l.length)}function e(l){if(typeof l!="function"||typeof l.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(l.outputLen),s(l.blockLen)}function a(l,E=!0){if(l.destroyed)throw new Error("Hash instance has been destroyed");if(E&&l.finished)throw new Error("Hash#digest() has already been called")}function c(l,E){u(l);const A=E.outputLen;if(l.length<A)throw new Error("digestInto() expects output buffer of length at least "+A)}function o(l){return new Uint8Array(l.buffer,l.byteOffset,l.byteLength)}function i(l){return new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4))}function f(...l){for(let E=0;E<l.length;E++)l[E].fill(0)}function d(l){return new DataView(l.buffer,l.byteOffset,l.byteLength)}function p(l,E){return l<<32-E|l>>>E}function S(l,E){return l<<E|l>>>32-E>>>0}n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h(l){return l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255}n.swap8IfBE=n.isLE?l=>l:l=>h(l),n.byteSwapIfBE=n.swap8IfBE;function _(l){for(let E=0;E<l.length;E++)l[E]=h(l[E]);return l}n.swap32IfBE=n.isLE?l=>l:_;const x=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",U=Array.from({length:256},(l,E)=>E.toString(16).padStart(2,"0"));function I(l){if(u(l),x)return l.toHex();let E="";for(let A=0;A<l.length;A++)E+=U[l[A]];return E}const m={_0:48,_9:57,A:65,F:70,a:97,f:102};function L(l){if(l>=m._0&&l<=m._9)return l-m._0;if(l>=m.A&&l<=m.F)return l-(m.A-10);if(l>=m.a&&l<=m.f)return l-(m.a-10)}function y(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);if(x)return Uint8Array.fromHex(l);const E=l.length,A=E/2;if(E%2)throw new Error("hex string expected, got unpadded hex of length "+E);const C=new Uint8Array(A);for(let M=0,W=0;M<A;M++,W+=2){const X=L(l.charCodeAt(W)),z=L(l.charCodeAt(W+1));if(X===void 0||z===void 0){const K=l[W]+l[W+1];throw new Error('hex string expected, got non-hex character "'+K+'" at index '+W)}C[M]=X*16+z}return C}const O=async()=>{};n.nextTick=O;async function T(l,E,A){let C=Date.now();for(let M=0;M<l;M++){A(M);const W=Date.now()-C;W>=0&&W<E||(await(0,n.nextTick)(),C+=W)}}function B(l){if(typeof l!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(l))}function v(l){return new TextDecoder().decode(l)}function g(l){return typeof l=="string"&&(l=B(l)),u(l),l}function b(l){return typeof l=="string"&&(l=B(l)),u(l),l}function j(...l){let E=0;for(let C=0;C<l.length;C++){const M=l[C];u(M),E+=M.length}const A=new Uint8Array(E);for(let C=0,M=0;C<l.length;C++){const W=l[C];A.set(W,M),M+=W.length}return A}function w(l,E){if(E!==void 0&&{}.toString.call(E)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(l,E)}class q{}n.Hash=q;function D(l){const E=C=>l().update(g(C)).digest(),A=l();return E.outputLen=A.outputLen,E.blockLen=A.blockLen,E.create=()=>l(),E}function F(l){const E=(C,M)=>l(M).update(g(C)).digest(),A=l({});return E.outputLen=A.outputLen,E.blockLen=A.blockLen,E.create=C=>l(C),E}function $(l){const E=(C,M)=>l(M).update(g(C)).digest(),A=l({});return E.outputLen=A.outputLen,E.blockLen=A.blockLen,E.create=C=>l(C),E}n.wrapConstructor=D,n.wrapConstructorWithOpts=F,n.wrapXOFConstructorWithOpts=$;function G(l=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(l));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(l));throw new Error("crypto.getRandomValues must be defined")}}(Ze)),Ze}var sr;function Vn(){if(sr)return k;sr=1,Object.defineProperty(k,"__esModule",{value:!0}),k.SHA512_IV=k.SHA384_IV=k.SHA224_IV=k.SHA256_IV=k.HashMD=void 0,k.setBigUint64=t,k.Chi=r,k.Maj=s;const n=yr();function t(e,a,c,o){if(typeof e.setBigUint64=="function")return e.setBigUint64(a,c,o);const i=BigInt(32),f=BigInt(4294967295),d=Number(c>>i&f),p=Number(c&f),S=o?4:0,h=o?0:4;e.setUint32(a+S,d,o),e.setUint32(a+h,p,o)}function r(e,a,c){return e&a^~e&c}function s(e,a,c){return e&a^e&c^a&c}class u extends n.Hash{constructor(a,c,o,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=a,this.outputLen=c,this.padOffset=o,this.isLE=i,this.buffer=new Uint8Array(a),this.view=(0,n.createView)(this.buffer)}update(a){(0,n.aexists)(this),a=(0,n.toBytes)(a),(0,n.abytes)(a);const{view:c,buffer:o,blockLen:i}=this,f=a.length;for(let d=0;d<f;){const p=Math.min(i-this.pos,f-d);if(p===i){const S=(0,n.createView)(a);for(;i<=f-d;d+=i)this.process(S,d);continue}o.set(a.subarray(d,d+p),this.pos),this.pos+=p,d+=p,this.pos===i&&(this.process(c,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){(0,n.aexists)(this),(0,n.aoutput)(a,this),this.finished=!0;const{buffer:c,view:o,blockLen:i,isLE:f}=this;let{pos:d}=this;c[d++]=128,(0,n.clean)(this.buffer.subarray(d)),this.padOffset>i-d&&(this.process(o,0),d=0);for(let x=d;x<i;x++)c[x]=0;t(o,i-8,BigInt(this.length*8),f),this.process(o,0);const p=(0,n.createView)(a),S=this.outputLen;if(S%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=S/4,_=this.get();if(h>_.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<h;x++)p.setUint32(4*x,_[x],f)}digest(){const{buffer:a,outputLen:c}=this;this.digestInto(a);const o=a.slice(0,c);return this.destroy(),o}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());const{blockLen:c,buffer:o,length:i,finished:f,destroyed:d,pos:p}=this;return a.destroyed=d,a.finished=f,a.length=i,a.pos=p,i%c&&a.buffer.set(o),a}clone(){return this._cloneInto()}}return k.HashMD=u,k.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),k.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),k.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),k.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),k}var V={},ar;function On(){if(ar)return V;ar=1,Object.defineProperty(V,"__esModule",{value:!0}),V.toBig=V.shrSL=V.shrSH=V.rotrSL=V.rotrSH=V.rotrBL=V.rotrBH=V.rotr32L=V.rotr32H=V.rotlSL=V.rotlSH=V.rotlBL=V.rotlBH=V.add5L=V.add5H=V.add4L=V.add4H=V.add3L=V.add3H=void 0,V.add=U,V.fromBig=r,V.split=s;const n=BigInt(2**32-1),t=BigInt(32);function r(v,g=!1){return g?{h:Number(v&n),l:Number(v>>t&n)}:{h:Number(v>>t&n)|0,l:Number(v&n)|0}}function s(v,g=!1){const b=v.length;let j=new Uint32Array(b),w=new Uint32Array(b);for(let q=0;q<b;q++){const{h:D,l:F}=r(v[q],g);[j[q],w[q]]=[D,F]}return[j,w]}const u=(v,g)=>BigInt(v>>>0)<<t|BigInt(g>>>0);V.toBig=u;const e=(v,g,b)=>v>>>b;V.shrSH=e;const a=(v,g,b)=>v<<32-b|g>>>b;V.shrSL=a;const c=(v,g,b)=>v>>>b|g<<32-b;V.rotrSH=c;const o=(v,g,b)=>v<<32-b|g>>>b;V.rotrSL=o;const i=(v,g,b)=>v<<64-b|g>>>b-32;V.rotrBH=i;const f=(v,g,b)=>v>>>b-32|g<<64-b;V.rotrBL=f;const d=(v,g)=>g;V.rotr32H=d;const p=(v,g)=>v;V.rotr32L=p;const S=(v,g,b)=>v<<b|g>>>32-b;V.rotlSH=S;const h=(v,g,b)=>g<<b|v>>>32-b;V.rotlSL=h;const _=(v,g,b)=>g<<b-32|v>>>64-b;V.rotlBH=_;const x=(v,g,b)=>v<<b-32|g>>>64-b;V.rotlBL=x;function U(v,g,b,j){const w=(g>>>0)+(j>>>0);return{h:v+b+(w/2**32|0)|0,l:w|0}}const I=(v,g,b)=>(v>>>0)+(g>>>0)+(b>>>0);V.add3L=I;const m=(v,g,b,j)=>g+b+j+(v/2**32|0)|0;V.add3H=m;const L=(v,g,b,j)=>(v>>>0)+(g>>>0)+(b>>>0)+(j>>>0);V.add4L=L;const y=(v,g,b,j,w)=>g+b+j+w+(v/2**32|0)|0;V.add4H=y;const O=(v,g,b,j,w)=>(v>>>0)+(g>>>0)+(b>>>0)+(j>>>0)+(w>>>0);V.add5L=O;const T=(v,g,b,j,w,q)=>g+b+j+w+q+(v/2**32|0)|0;V.add5H=T;const B={fromBig:r,split:s,toBig:u,shrSH:e,shrSL:a,rotrSH:c,rotrSL:o,rotrBH:i,rotrBL:f,rotr32H:d,rotr32L:p,rotlSH:S,rotlSL:h,rotlBH:_,rotlBL:x,add:U,add3L:I,add3H:m,add4L:L,add4H:y,add5H:T,add5L:O};return V.default=B,V}var dr;function Bn(){if(dr)return N;dr=1,Object.defineProperty(N,"__esModule",{value:!0}),N.sha512_224=N.sha512_256=N.sha384=N.sha512=N.sha224=N.sha256=N.SHA512_256=N.SHA512_224=N.SHA384=N.SHA512=N.SHA224=N.SHA256=void 0;const n=Vn(),t=On(),r=yr(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),u=new Uint32Array(64);class e extends n.HashMD{constructor(m=32){super(64,m,8,!1),this.A=n.SHA256_IV[0]|0,this.B=n.SHA256_IV[1]|0,this.C=n.SHA256_IV[2]|0,this.D=n.SHA256_IV[3]|0,this.E=n.SHA256_IV[4]|0,this.F=n.SHA256_IV[5]|0,this.G=n.SHA256_IV[6]|0,this.H=n.SHA256_IV[7]|0}get(){const{A:m,B:L,C:y,D:O,E:T,F:B,G:v,H:g}=this;return[m,L,y,O,T,B,v,g]}set(m,L,y,O,T,B,v,g){this.A=m|0,this.B=L|0,this.C=y|0,this.D=O|0,this.E=T|0,this.F=B|0,this.G=v|0,this.H=g|0}process(m,L){for(let w=0;w<16;w++,L+=4)u[w]=m.getUint32(L,!1);for(let w=16;w<64;w++){const q=u[w-15],D=u[w-2],F=(0,r.rotr)(q,7)^(0,r.rotr)(q,18)^q>>>3,$=(0,r.rotr)(D,17)^(0,r.rotr)(D,19)^D>>>10;u[w]=$+u[w-7]+F+u[w-16]|0}let{A:y,B:O,C:T,D:B,E:v,F:g,G:b,H:j}=this;for(let w=0;w<64;w++){const q=(0,r.rotr)(v,6)^(0,r.rotr)(v,11)^(0,r.rotr)(v,25),D=j+q+(0,n.Chi)(v,g,b)+s[w]+u[w]|0,$=((0,r.rotr)(y,2)^(0,r.rotr)(y,13)^(0,r.rotr)(y,22))+(0,n.Maj)(y,O,T)|0;j=b,b=g,g=v,v=B+D|0,B=T,T=O,O=y,y=D+$|0}y=y+this.A|0,O=O+this.B|0,T=T+this.C|0,B=B+this.D|0,v=v+this.E|0,g=g+this.F|0,b=b+this.G|0,j=j+this.H|0,this.set(y,O,T,B,v,g,b,j)}roundClean(){(0,r.clean)(u)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}N.SHA256=e;class a extends e{constructor(){super(28),this.A=n.SHA224_IV[0]|0,this.B=n.SHA224_IV[1]|0,this.C=n.SHA224_IV[2]|0,this.D=n.SHA224_IV[3]|0,this.E=n.SHA224_IV[4]|0,this.F=n.SHA224_IV[5]|0,this.G=n.SHA224_IV[6]|0,this.H=n.SHA224_IV[7]|0}}N.SHA224=a;const c=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(I=>BigInt(I))),o=c[0],i=c[1],f=new Uint32Array(80),d=new Uint32Array(80);class p extends n.HashMD{constructor(m=64){super(128,m,16,!1),this.Ah=n.SHA512_IV[0]|0,this.Al=n.SHA512_IV[1]|0,this.Bh=n.SHA512_IV[2]|0,this.Bl=n.SHA512_IV[3]|0,this.Ch=n.SHA512_IV[4]|0,this.Cl=n.SHA512_IV[5]|0,this.Dh=n.SHA512_IV[6]|0,this.Dl=n.SHA512_IV[7]|0,this.Eh=n.SHA512_IV[8]|0,this.El=n.SHA512_IV[9]|0,this.Fh=n.SHA512_IV[10]|0,this.Fl=n.SHA512_IV[11]|0,this.Gh=n.SHA512_IV[12]|0,this.Gl=n.SHA512_IV[13]|0,this.Hh=n.SHA512_IV[14]|0,this.Hl=n.SHA512_IV[15]|0}get(){const{Ah:m,Al:L,Bh:y,Bl:O,Ch:T,Cl:B,Dh:v,Dl:g,Eh:b,El:j,Fh:w,Fl:q,Gh:D,Gl:F,Hh:$,Hl:G}=this;return[m,L,y,O,T,B,v,g,b,j,w,q,D,F,$,G]}set(m,L,y,O,T,B,v,g,b,j,w,q,D,F,$,G){this.Ah=m|0,this.Al=L|0,this.Bh=y|0,this.Bl=O|0,this.Ch=T|0,this.Cl=B|0,this.Dh=v|0,this.Dl=g|0,this.Eh=b|0,this.El=j|0,this.Fh=w|0,this.Fl=q|0,this.Gh=D|0,this.Gl=F|0,this.Hh=$|0,this.Hl=G|0}process(m,L){for(let A=0;A<16;A++,L+=4)f[A]=m.getUint32(L),d[A]=m.getUint32(L+=4);for(let A=16;A<80;A++){const C=f[A-15]|0,M=d[A-15]|0,W=t.rotrSH(C,M,1)^t.rotrSH(C,M,8)^t.shrSH(C,M,7),X=t.rotrSL(C,M,1)^t.rotrSL(C,M,8)^t.shrSL(C,M,7),z=f[A-2]|0,K=d[A-2]|0,Me=t.rotrSH(z,K,19)^t.rotrBH(z,K,61)^t.shrSH(z,K,6),Fe=t.rotrSL(z,K,19)^t.rotrBL(z,K,61)^t.shrSL(z,K,6),Ne=t.add4L(X,Fe,d[A-7],d[A-16]),$e=t.add4H(Ne,W,Me,f[A-7],f[A-16]);f[A]=$e|0,d[A]=Ne|0}let{Ah:y,Al:O,Bh:T,Bl:B,Ch:v,Cl:g,Dh:b,Dl:j,Eh:w,El:q,Fh:D,Fl:F,Gh:$,Gl:G,Hh:l,Hl:E}=this;for(let A=0;A<80;A++){const C=t.rotrSH(w,q,14)^t.rotrSH(w,q,18)^t.rotrBH(w,q,41),M=t.rotrSL(w,q,14)^t.rotrSL(w,q,18)^t.rotrBL(w,q,41),W=w&D^~w&$,X=q&F^~q&G,z=t.add5L(E,M,X,i[A],d[A]),K=t.add5H(z,l,C,W,o[A],f[A]),Me=z|0,Fe=t.rotrSH(y,O,28)^t.rotrBH(y,O,34)^t.rotrBH(y,O,39),Ne=t.rotrSL(y,O,28)^t.rotrBL(y,O,34)^t.rotrBL(y,O,39),$e=y&T^y&v^T&v,Tr=O&B^O&g^B&g;l=$|0,E=G|0,$=D|0,G=F|0,D=w|0,F=q|0,{h:w,l:q}=t.add(b|0,j|0,K|0,Me|0),b=v|0,j=g|0,v=T|0,g=B|0,T=y|0,B=O|0;const ut=t.add3L(Me,Ne,Tr);y=t.add3H(ut,K,Fe,$e),O=ut|0}({h:y,l:O}=t.add(this.Ah|0,this.Al|0,y|0,O|0)),{h:T,l:B}=t.add(this.Bh|0,this.Bl|0,T|0,B|0),{h:v,l:g}=t.add(this.Ch|0,this.Cl|0,v|0,g|0),{h:b,l:j}=t.add(this.Dh|0,this.Dl|0,b|0,j|0),{h:w,l:q}=t.add(this.Eh|0,this.El|0,w|0,q|0),{h:D,l:F}=t.add(this.Fh|0,this.Fl|0,D|0,F|0),{h:$,l:G}=t.add(this.Gh|0,this.Gl|0,$|0,G|0),{h:l,l:E}=t.add(this.Hh|0,this.Hl|0,l|0,E|0),this.set(y,O,T,B,v,g,b,j,w,q,D,F,$,G,l,E)}roundClean(){(0,r.clean)(f,d)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}N.SHA512=p;class S extends p{constructor(){super(48),this.Ah=n.SHA384_IV[0]|0,this.Al=n.SHA384_IV[1]|0,this.Bh=n.SHA384_IV[2]|0,this.Bl=n.SHA384_IV[3]|0,this.Ch=n.SHA384_IV[4]|0,this.Cl=n.SHA384_IV[5]|0,this.Dh=n.SHA384_IV[6]|0,this.Dl=n.SHA384_IV[7]|0,this.Eh=n.SHA384_IV[8]|0,this.El=n.SHA384_IV[9]|0,this.Fh=n.SHA384_IV[10]|0,this.Fl=n.SHA384_IV[11]|0,this.Gh=n.SHA384_IV[12]|0,this.Gl=n.SHA384_IV[13]|0,this.Hh=n.SHA384_IV[14]|0,this.Hl=n.SHA384_IV[15]|0}}N.SHA384=S;const h=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),_=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class x extends p{constructor(){super(28),this.Ah=h[0]|0,this.Al=h[1]|0,this.Bh=h[2]|0,this.Bl=h[3]|0,this.Ch=h[4]|0,this.Cl=h[5]|0,this.Dh=h[6]|0,this.Dl=h[7]|0,this.Eh=h[8]|0,this.El=h[9]|0,this.Fh=h[10]|0,this.Fl=h[11]|0,this.Gh=h[12]|0,this.Gl=h[13]|0,this.Hh=h[14]|0,this.Hl=h[15]|0}}N.SHA512_224=x;class U extends p{constructor(){super(32),this.Ah=_[0]|0,this.Al=_[1]|0,this.Bh=_[2]|0,this.Bl=_[3]|0,this.Ch=_[4]|0,this.Cl=_[5]|0,this.Dh=_[6]|0,this.Dl=_[7]|0,this.Eh=_[8]|0,this.El=_[9]|0,this.Fh=_[10]|0,this.Fl=_[11]|0,this.Gh=_[12]|0,this.Gl=_[13]|0,this.Hh=_[14]|0,this.Hl=_[15]|0}}return N.SHA512_256=U,N.sha256=(0,r.createHasher)(()=>new e),N.sha224=(0,r.createHasher)(()=>new a),N.sha512=(0,r.createHasher)(()=>new p),N.sha384=(0,r.createHasher)(()=>new S),N.sha512_256=(0,r.createHasher)(()=>new U),N.sha512_224=(0,r.createHasher)(()=>new x),N}var Qe={},et={},tt={},De={exports:{}},ur;function dt(){return ur||(ur=1,typeof Object.create=="function"?De.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:De.exports=function(t,r){if(r){t.super_=r;var s=function(){};s.prototype=r.prototype,t.prototype=new s,t.prototype.constructor=t}}),De.exports}var rt={},fr;function wr(){if(fr)return rt;fr=1;const n=dt();function t(s){this._reporterState={obj:null,path:[],options:s||{},errors:[]}}rt.Reporter=t,t.prototype.isError=function(u){return u instanceof r},t.prototype.save=function(){const u=this._reporterState;return{obj:u.obj,pathLen:u.path.length}},t.prototype.restore=function(u){const e=this._reporterState;e.obj=u.obj,e.path=e.path.slice(0,u.pathLen)},t.prototype.enterKey=function(u){return this._reporterState.path.push(u)},t.prototype.exitKey=function(u){const e=this._reporterState;e.path=e.path.slice(0,u-1)},t.prototype.leaveKey=function(u,e,a){const c=this._reporterState;this.exitKey(u),c.obj!==null&&(c.obj[e]=a)},t.prototype.path=function(){return this._reporterState.path.join("/")},t.prototype.enterObject=function(){const u=this._reporterState,e=u.obj;return u.obj={},e},t.prototype.leaveObject=function(u){const e=this._reporterState,a=e.obj;return e.obj=u,a},t.prototype.error=function(u){let e;const a=this._reporterState,c=u instanceof r;if(c?e=u:e=new r(a.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),u.message||u,u.stack),!a.options.partial)throw e;return c||a.errors.push(e),e},t.prototype.wrapResult=function(u){const e=this._reporterState;return e.options.partial?{result:this.isError(u)?null:u,errors:e.errors}:u};function r(s,u){this.path=s,this.rethrow(u)}return n(r,Error),r.prototype.rethrow=function(u){if(this.message=u+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this},rt}var nt={},lr;function Vr(){if(lr)return nt;lr=1;function n(t,r){if(Array.isArray(t))this.length=0,this.value=t.map(function(s){return n.isEncoderBuffer(s)||(s=new n(s,r)),this.length+=s.length,s},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return r.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Buffer.byteLength(t);else if(Buffer.isBuffer(t))this.value=t,this.length=t.length;else return r.error("Unsupported type: "+typeof t)}return nt.EncoderBuffer=n,n.isEncoderBuffer=function(r){return r instanceof n?!0:typeof r=="object"&&r.constructor.name==="EncoderBuffer"&&typeof r.length=="number"&&typeof r.join=="function"},n.prototype.join=function(r,s){return r||(r=Buffer.alloc(this.length)),s||(s=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(u){u.join(r,s),s+=u.length}):(typeof this.value=="number"?r[s]=this.value:typeof this.value=="string"?r.write(this.value,s):Buffer.isBuffer(this.value)&&this.value.copy(r,s),s+=this.length)),r},nt}var ot,hr;function Or(){if(hr)return ot;hr=1;const n=wr().Reporter,t=Vr().EncoderBuffer,r=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(r),u=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function e(c,o,i){const f={};this._baseState=f,f.name=i,f.enc=c,f.parent=o||null,f.children=null,f.tag=null,f.args=null,f.reverseArgs=null,f.choice=null,f.optional=!1,f.any=!1,f.obj=!1,f.use=null,f.useDecoder=null,f.key=null,f.default=null,f.explicit=null,f.implicit=null,f.contains=null,f.parent||(f.children=[],this._wrap())}ot=e;const a=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return e.prototype.clone=function(){const o=this._baseState,i={};a.forEach(function(d){i[d]=o[d]});const f=new this.constructor(i.parent);return f._baseState=i,f},e.prototype._wrap=function(){const o=this._baseState;s.forEach(function(i){this[i]=function(){const d=new this.constructor(this);return o.children.push(d),d[i].apply(d,arguments)}},this)},e.prototype._init=function(o){const i=this._baseState;o.call(this),i.children=i.children.filter(function(f){return f._baseState.parent===this},this)},e.prototype._useArgs=function(o){const i=this._baseState,f=o.filter(function(d){return d instanceof this.constructor},this);o=o.filter(function(d){return!(d instanceof this.constructor)},this),f.length!==0&&(i.children=f,f.forEach(function(d){d._baseState.parent=this},this)),o.length!==0&&(i.args=o,i.reverseArgs=o.map(function(d){if(typeof d!="object"||d.constructor!==Object)return d;const p={};return Object.keys(d).forEach(function(S){S==(S|0)&&(S|=0);const h=d[S];p[h]=S}),p}))},u.forEach(function(c){e.prototype[c]=function(){const i=this._baseState;throw new Error(c+" not implemented for encoding: "+i.enc)}}),r.forEach(function(c){e.prototype[c]=function(){const i=this._baseState,f=Array.prototype.slice.call(arguments);return i.tag=c,this._useArgs(f),this}}),e.prototype.use=function(o){const i=this._baseState;return i.use=o,this},e.prototype.optional=function(){const o=this._baseState;return o.optional=!0,this},e.prototype.def=function(o){const i=this._baseState;return i.default=o,i.optional=!0,this},e.prototype.explicit=function(o){const i=this._baseState;return i.explicit=o,this},e.prototype.implicit=function(o){const i=this._baseState;return i.implicit=o,this},e.prototype.obj=function(){const o=this._baseState,i=Array.prototype.slice.call(arguments);return o.obj=!0,i.length!==0&&this._useArgs(i),this},e.prototype.key=function(o){const i=this._baseState;return i.key=o,this},e.prototype.any=function(){const o=this._baseState;return o.any=!0,this},e.prototype.choice=function(o){const i=this._baseState;return i.choice=o,this._useArgs(Object.keys(o).map(function(f){return o[f]})),this},e.prototype.contains=function(o){const i=this._baseState;return i.contains=o,this},e.prototype._createEncoderBuffer=function(o){return new t(o,this.reporter)},e.prototype._encode=function(o,i,f){const d=this._baseState;if(d.default!==null&&d.default===o)return;const p=this._encodeValue(o,i,f);if(p!==void 0&&!this._skipDefault(p,i,f))return p},e.prototype._encodeValue=function(o,i,f){const d=this._baseState;if(d.parent===null)return d.children[0]._encode(o,i||new n);let p=null;if(this.reporter=i,d.optional&&o===void 0)if(d.default!==null)o=d.default;else return;let S=null,h=!1;if(d.any)p=this._createEncoderBuffer(o);else if(d.choice)p=this._encodeChoice(o,i);else if(d.contains)S=this._getUse(d.contains,f)._encode(o,i),h=!0;else if(d.children)S=d.children.map(function(_){if(_._baseState.tag==="null_")return _._encode(null,i,o);if(_._baseState.key===null)return i.error("Child should have a key");const x=i.enterKey(_._baseState.key);if(typeof o!="object")return i.error("Child expected, but input is not object");const U=_._encode(o[_._baseState.key],i,o);return i.leaveKey(x),U},this).filter(function(_){return _}),S=this._createEncoderBuffer(S);else if(d.tag==="seqof"||d.tag==="setof"){if(!(d.args&&d.args.length===1))return i.error("Too many args for : "+d.tag);if(!Array.isArray(o))return i.error("seqof/setof, but data is not Array");const _=this.clone();_._baseState.implicit=null,S=this._createEncoderBuffer(o.map(function(x){const U=this._baseState;return this._getUse(U.args[0],o)._encode(x,i)},_))}else d.use!==null?p=this._getUse(d.use,f)._encode(o,i):(S=this._encodePrimitive(d.tag,o),h=!0);if(!d.any&&d.choice===null){const _=d.implicit!==null?d.implicit:d.tag,x=d.implicit===null?"universal":"context";_===null?d.use===null&&i.error("Tag could be omitted only for .use()"):d.use===null&&(p=this._encodeComposite(_,h,x,S))}return d.explicit!==null&&(p=this._encodeComposite(d.explicit,!1,"context",p)),p},e.prototype._encodeChoice=function(o,i){const f=this._baseState,d=f.choice[o.type];if(!d)throw new Error(o.type+" not found in "+JSON.stringify(Object.keys(f.choice)));return d._encode(o.value,i)},e.prototype._encodePrimitive=function(o,i){const f=this._baseState;if(/str$/.test(o))return this._encodeStr(i,o);if(o==="objid"&&f.args)return this._encodeObjid(i,f.reverseArgs[0],f.args[1]);if(o==="objid")return this._encodeObjid(i,null,null);if(o==="gentime"||o==="utctime")return this._encodeTime(i,o);if(o==="null_")return this._encodeNull();if(o==="int"||o==="enum")return this._encodeInt(i,f.args&&f.reverseArgs[0]);if(o==="bool")return this._encodeBool(i);if(o==="objDesc")return this._encodeStr(i,o);throw new Error("Unsupported tag: "+o)},e.prototype._isNumstr=function(o){return/^[0-9 ]*$/.test(o)},e.prototype._isPrintstr=function(o){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(o)},ot}var it={},_r;function Br(){return _r||(_r=1,function(n){function t(r){const s={};return Object.keys(r).forEach(function(u){(u|0)==u&&(u=u|0);const e=r[u];s[e]=u}),s}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=t(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=t(n.tag)}(it)),it}var ct,pr;function Cn(){if(pr)return ct;pr=1;const n=dt(),t=Or(),r=Br();function s(c){this.enc="der",this.name=c.name,this.entity=c,this.tree=new u,this.tree._init(c.body)}ct=s,s.prototype.encode=function(o,i){return this.tree._encode(o,i).join()};function u(c){t.call(this,"der",c)}n(u,t),u.prototype._encodeComposite=function(o,i,f,d){const p=a(o,i,f,this.reporter);if(d.length<128){const _=Buffer.alloc(2);return _[0]=p,_[1]=d.length,this._createEncoderBuffer([_,d])}let S=1;for(let _=d.length;_>=256;_>>=8)S++;const h=Buffer.alloc(2+S);h[0]=p,h[1]=128|S;for(let _=1+S,x=d.length;x>0;_--,x>>=8)h[_]=x&255;return this._createEncoderBuffer([h,d])},u.prototype._encodeStr=function(o,i){if(i==="bitstr")return this._createEncoderBuffer([o.unused|0,o.data]);if(i==="bmpstr"){const f=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++)f.writeUInt16BE(o.charCodeAt(d),d*2);return this._createEncoderBuffer(f)}else return i==="numstr"?this._isNumstr(o)?this._createEncoderBuffer(o):this.reporter.error("Encoding of string type: numstr supports only digits and space"):i==="printstr"?this._isPrintstr(o)?this._createEncoderBuffer(o):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(i)?this._createEncoderBuffer(o):i==="objDesc"?this._createEncoderBuffer(o):this.reporter.error("Encoding of string type: "+i+" unsupported")},u.prototype._encodeObjid=function(o,i,f){if(typeof o=="string"){if(!i)return this.reporter.error("string objid given, but no values map found");if(!i.hasOwnProperty(o))return this.reporter.error("objid not found in values map");o=i[o].split(/[\s.]+/g);for(let h=0;h<o.length;h++)o[h]|=0}else if(Array.isArray(o)){o=o.slice();for(let h=0;h<o.length;h++)o[h]|=0}if(!Array.isArray(o))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(o));if(!f){if(o[1]>=40)return this.reporter.error("Second objid identifier OOB");o.splice(0,2,o[0]*40+o[1])}let d=0;for(let h=0;h<o.length;h++){let _=o[h];for(d++;_>=128;_>>=7)d++}const p=Buffer.alloc(d);let S=p.length-1;for(let h=o.length-1;h>=0;h--){let _=o[h];for(p[S--]=_&127;(_>>=7)>0;)p[S--]=128|_&127}return this._createEncoderBuffer(p)};function e(c){return c<10?"0"+c:c}u.prototype._encodeTime=function(o,i){let f;const d=new Date(o);return i==="gentime"?f=[e(d.getUTCFullYear()),e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):i==="utctime"?f=[e(d.getUTCFullYear()%100),e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+i+" time is not supported yet"),this._encodeStr(f,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(o,i){if(typeof o=="string"){if(!i)return this.reporter.error("String int or enum given, but no values map");if(!i.hasOwnProperty(o))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(o));o=i[o]}if(typeof o!="number"&&!Buffer.isBuffer(o)){const p=o.toArray();!o.sign&&p[0]&128&&p.unshift(0),o=Buffer.from(p)}if(Buffer.isBuffer(o)){let p=o.length;o.length===0&&p++;const S=Buffer.alloc(p);return o.copy(S),o.length===0&&(S[0]=0),this._createEncoderBuffer(S)}if(o<128)return this._createEncoderBuffer(o);if(o<256)return this._createEncoderBuffer([0,o]);let f=1;for(let p=o;p>=256;p>>=8)f++;const d=new Array(f);for(let p=d.length-1;p>=0;p--)d[p]=o&255,o>>=8;return d[0]&128&&d.unshift(0),this._createEncoderBuffer(Buffer.from(d))},u.prototype._encodeBool=function(o){return this._createEncoderBuffer(o?255:0)},u.prototype._use=function(o,i){return typeof o=="function"&&(o=o(i)),o._getEncoder("der").tree},u.prototype._skipDefault=function(o,i,f){const d=this._baseState;let p;if(d.default===null)return!1;const S=o.join();if(d.defaultBuffer===void 0&&(d.defaultBuffer=this._encodeValue(d.default,i,f).join()),S.length!==d.defaultBuffer.length)return!1;for(p=0;p<S.length;p++)if(S[p]!==d.defaultBuffer[p])return!1;return!0};function a(c,o,i,f){let d;if(c==="seqof"?c="seq":c==="setof"&&(c="set"),r.tagByName.hasOwnProperty(c))d=r.tagByName[c];else if(typeof c=="number"&&(c|0)===c)d=c;else return f.error("Unknown tag: "+c);return d>=31?f.error("Multi-octet tag encoding unsupported"):(o||(d|=32),d|=r.tagClassByName[i||"universal"]<<6,d)}return ct}var vr;function Cr(){return vr||(vr=1,function(n){const t=n;t.der=Cn()}(tt)),tt}var gr;function Tn(){return gr||(gr=1,function(n){const t=Cr(),r=dt(),s=n;s.define=function(a,c){return new u(a,c)};function u(e,a){this.name=e,this.body=a,this.encoders={}}u.prototype._createNamed=function(a){const c=this.name;function o(i){this._initNamed(i,c)}return r(o,a),o.prototype._initNamed=function(f,d){a.call(this,f,d)},new o(this)},u.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(t[a])),this.encoders[a]},u.prototype.encode=function(a,c,o){return this._getEncoder(c).encode(a,o)}}(et)),et}var st={},Er;function In(){return Er||(Er=1,function(n){const t=n;t.Reporter=wr().Reporter,t.EncoderBuffer=Vr().EncoderBuffer,t.Node=Or()}(st)),st}var at={},br;function Hn(){return br||(br=1,function(n){const t=n;t._reverse=function(s){const u={};return Object.keys(s).forEach(function(e){(e|0)==e&&(e=e|0);const a=s[e];u[a]=e}),u},t.der=Br()}(at)),at}var Sr;function Rn(){return Sr||(Sr=1,function(n){const t=n;t.define=Tn().define,t.base=In(),t.constants=Hn(),t.encoders=Cr()}(Qe)),Qe}var Ar;function Pn(){return Ar||(Ar=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsedTransaction=n.DEFAULT_CHAIN_ID=void 0;const t=mr(),r=H(),s=Bn(),u=Rn();n.DEFAULT_CHAIN_ID="beeab0de00000000000000000000000000000000000000000000000000000000";class e{constructor(c,o=n.DEFAULT_CHAIN_ID){this.encode=()=>{const i=this.operations.reduce((d,p)=>Buffer.concat([d,this.encoder.encode(p,"der")]),Buffer.alloc(0));return Buffer.concat([this.encoder.encode(this.chainId,"der"),this.encoder.encode(this.ref_block_num,"der"),this.encoder.encode(this.ref_block_prefix,"der"),this.encoder.encode(this.expiration,"der"),this.encoder.encode(this.operations_count,"der"),i,this.encoder.encode(this.extensions_size,"der")])},this.rawTx=c,this.encoder=u.define("LedgerEncoder",function(){return this.octstr()}),this.chainId=Buffer.from(o,"hex"),this.ref_block_num=r.Encoder.encodeUInt16(this.rawTx.ref_block_num&65535),this.ref_block_prefix=r.Encoder.encodeUInt32(this.rawTx.ref_block_prefix),this.expiration=r.Encoder.encodeDateTime(this.rawTx.expiration),this.extensions_size=r.Encoder.encodeUInt8(this.rawTx.extensions.length),this.operations_count=r.Encoder.encodeUInt8(this.rawTx.operations.length),this.operations=this.rawTx.operations.map(t.ParsedOperation.encode)}digest(){const c=Buffer.concat([this.chainId,this.ref_block_num,this.ref_block_prefix,this.expiration,this.operations_count,this.operations.reduce((o,i)=>Buffer.concat([o,i]),Buffer.alloc(0)),this.extensions_size]);return Buffer.from((0,s.sha256)(c)).toString("hex")}id(){const c=Buffer.concat([this.ref_block_num,this.ref_block_prefix,this.expiration,this.operations_count,this.operations.reduce((o,i)=>Buffer.concat([o,i]),Buffer.alloc(0)),this.extensions_size]);return Buffer.from((0,s.sha256)(c)).toString("hex").slice(0,40)}}n.ParsedTransaction=e}(ke)),ke}const Un=Ir(Rr);var xr;function qn(){if(xr)return Y;xr=1;var n=Y&&Y.__awaiter||function(o,i,f,d){function p(S){return S instanceof f?S:new f(function(h){h(S)})}return new(f||(f=Promise))(function(S,h){function _(I){try{U(d.next(I))}catch(m){h(m)}}function x(I){try{U(d.throw(I))}catch(m){h(m)}}function U(I){I.done?S(I.value):p(I.value).then(_,x)}U((d=d.apply(o,i||[])).next())})};Object.defineProperty(Y,"__esModule",{value:!0});const t=Ur(),r=Pn(),s=H(),u=mr(),{TransportStatusError:e,StatusCodes:a}=Un;class c{constructor(i,f="HIVE"){this.CLA=212,this.INS_GET_PUBLIC_KEY=2,this.INS_SIGN_TRANSACTION=4,this.INS_GET_APP_VERSION=6,this.INS_GET_APP_NAME=8,this.INS_SIGN_HASH=16,this.INS_GET_SETTINGS=18,this.INS_SIGN_MESSAGE=20,this.P1_CONFIRM=1,this.P1_NON_CONFIRM=0,this.P2_NO_CHAINCODE=0,this.P1_FIRST_CHUNK=0,this.P1_SUBSEQUENT_CHUNK=128,this.P2_LAST_CHUNK=0,this.P2_WILL_BE_MORE=128,this.chunkMaxSize=200,this.exchangeData=(d,p,S)=>n(this,void 0,void 0,function*(){const h=[];let _=0,x=null;for(;_!==d.length;){d.length-_>this.chunkMaxSize?x=d.slice(_,_+this.chunkMaxSize):x=d.slice(_);const I=this.generateSignApdu(this.CLA,S,_===0?this.P1_FIRST_CHUNK:this.P1_SUBSEQUENT_CHUNK,_+x.length===d.length?this.P2_LAST_CHUNK:this.P2_WILL_BE_MORE,p,_,x);_+=x.length;const m=yield this.transport.exchange(I),L=m.readUInt16BE(m.length-2);if(L!==a.OK)throw new e(L);h.push(m)}return h[h.length-1].toString("hex").slice(0,-4)}),this.generateSignApdu=(d,p,S,h,_,x,U)=>{const I=new t.Path(_),m=x===0?I.size*4+1+U.length:U.length;return x===0?Buffer.concat([Buffer.from([d,p,S,h]),Buffer.from([m]),I.encode(),U]):Buffer.concat([Buffer.from([d,p,S,h]),Buffer.from([m]),U])},this.transport=i,i.decorateAppAPIMethods(this,["getPublicKey","signTransaction","getAppVersion","getAppName","signHash","getSettings"],f)}getPublicKey(i,f=!1,d="STM"){return n(this,void 0,void 0,function*(){const p=f?this.P1_CONFIRM:this.P1_NON_CONFIRM,S=new t.Path(i),h=yield this.transport.send(this.CLA,this.INS_GET_PUBLIC_KEY,p,this.P2_NO_CHAINCODE,S.encode()),_=1+h[0],x=h.slice(_+1,_+1+h[_]).toString("ascii");return`${d}${x.substring(3)}`})}getAppVersion(){return n(this,void 0,void 0,function*(){const i=yield this.transport.send(this.CLA,this.INS_GET_APP_VERSION,0,0);return`${i[0]}.${i[1]}.${i[2]}`})}getSettings(){return n(this,void 0,void 0,function*(){return{hashSignPolicy:(yield this.transport.send(this.CLA,this.INS_GET_SETTINGS,0,0))[0]===1}})}getAppName(){return n(this,void 0,void 0,function*(){return(yield this.transport.send(this.CLA,this.INS_GET_APP_NAME,0,0)).slice(0,-2).toString()})}signTransaction(i,f,d){return n(this,void 0,void 0,function*(){const p=new r.ParsedTransaction(i,d).encode(),S=yield this.exchangeData(p,f,this.INS_SIGN_TRANSACTION);return Object.assign(Object.assign({},i),{signatures:[S]})})}signMessage(i,f){return n(this,void 0,void 0,function*(){if(i.length>512)throw new Error("Message length should be less than 512 characters");const d=s.Encoder.encodeString(i);return this.exchangeData(d,f,this.INS_SIGN_MESSAGE)})}signHash(i,f){return n(this,void 0,void 0,function*(){const d=new t.Path(f),p=Buffer.from(i,"hex"),S=d.size*4+1+p.length,h=Buffer.concat([Buffer.from([this.CLA,this.INS_SIGN_HASH,0,0]),Buffer.from([S]),d.encode(),Buffer.from(i,"hex")]),_=yield this.transport.exchange(h),x=_.readUInt16BE(_.length-2);if(x!==a.OK)throw new e(x);return _.toString("hex").slice(0,-4)})}static getTransactionDigest(i,f=r.DEFAULT_CHAIN_ID){return new r.ParsedTransaction(i,f).digest()}static getTxId(i,f=r.DEFAULT_CHAIN_ID){return new r.ParsedTransaction(i,f).id()}static isDisplayableOnDevice(i){const f=["claim_account","create_claimed_account","witness_set_properties","account_update2","remove_proposal","update_proposal","recurrent_transfer"];return i.extensions&&i.extensions.length>0||i.operations&&i.operations.length>1||f.includes(i.operations[0][0])?!1:u.ParsedOperation.validate(i.operations[0])}}return Y.default=c,Y}var jn=qn();const Ln=Hr(jn),Co=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"}));export{Co as H};
